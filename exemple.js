if (!window.JOIN_ENV) window.JOIN_ENV = {};
window.JOIN_ENV["apropos"] = {
    _id: "dec7c351-a2e9-492f-8b58-e5c5001df3b2",
    alias: "apropos",
    owner: "jean-marc-joubert",
    version: "4",
    shape: "card",
    sortBy: "ordered",
    type: "list-card",
    analyticsUrl: "https://api.stories.studio/meas/",
    apparitionAnimation: "expend-from-left",
    elementAnimation: "pulsating-waves",
    enableVideoCover: true,
    lastEditDate: "2024-12-19T09:42:36.372Z",
    height: 500,
    labelsStyle: {
        mobile: { fontSize: 21, fontFamily: "Oswald_400", fontUrl: "https://fonts.gstatic.com/s/oswald/v40/TK3_WkUHHAIjg75cFRf3bXL8LICs1_FvgUFoZAaRliE.ttf" },
        desktop: { fontSize: 26, fontFamily: "Oswald_400", fontUrl: "https://fonts.gstatic.com/s/oswald/v40/TK3_WkUHHAIjg75cFRf3bXL8LICs1_FvgUFoZAaRliE.ttf" },
    },
    lastPublishDate: "2024-12-19T09:42:36.371Z",
    showStoryIcon: false,
    spacing: 11,
    borderColors: [
        "#f0323c",
        "#f23c3e",
        "#f44540",
        "#f64f42",
        "#f85944",
        "#fa6246",
        "#fc6c48",
        "#fe764a",
        "#ff784b",
        "#ff784b",
        "#ff784b",
        "#ff784b",
        "#ff784b",
        "#ff784b",
        "#ff784b",
        "#ff7046",
        "#ff5f3b",
        "#ff4f31",
        "#ff3e27",
        "#ff2e1c",
        "#ff1d12",
        "#ff0c08",
        "#fe0202",
        "#fc090a",
        "#fa1013",
        "#f8161b",
        "#f61d23",
        "#f4242b",
        "#f22b34",
    ],
    content: [
        { type: "story", order: 9765, data: "21db896f-7799-4860-b534-c6682445bcec" },
        { type: "story", order: 19531, data: "edb16b0a-ffff-4ee2-9653-0fa381480e28" },
        { type: "story", order: 39062, data: "4ee4360d-7869-4acb-89b4-cfe05089d803" },
        { type: "story", order: 2519531, data: "b8361dbd-4aec-40af-a8e3-f25bc8748661" },
        { type: "story", order: 5000000, data: "c5b28053-82f8-4406-8a99-681d59730090" },
        { type: "story", order: 7500000, data: "24762990-a7ed-49db-a2d9-27b5d28762ea" },
        { type: "story", order: 8500000, data: "8612dbad-967f-4f75-b192-94fabe745620" },
    ],
    storiesData: {
        "c5b28053-82f8-4406-8a99-681d59730090": {
            _id: "c5b28053-82f8-4406-8a99-681d59730090",
            version: "5",
            lastEditDate: 1721654643191,
            lastPublishDate: 1721654643191,
            owner: "jean-marc-joubert",
            title: "TOKIO INKARAMI - PROTOCOLE",
            currentCover: { mediaUrl: "https://videos.join-stories.com/optimized/mp4/short-sd-jean-marc-joubert__4388ff79-488a-4118-9e47-ed734e970830.mp4", types: ["mp4"], contentType: "video/mp4", cropCss: {} },
            containerLabel: "TOKIO INKARAMI - PROTOCOLE",
            pageCount: 14,
            engagementCount: 0,
            videoUrl: "https://stories.join-stories.com/jean-marc-joubert/c5b28053-82f8-4406-8a99-681d59730090/story.mp4",
            chapters: [
                { timing: { start: 0, end: 3.6 } },
                { timing: { start: 3.6, end: 6.567 } },
                { timing: { start: 6.567, end: 8.367 } },
                { timing: { start: 8.367, end: 12.167 } },
                { timing: { start: 12.167, end: 17.067 } },
                { timing: { start: 17.067, end: 20.467 } },
                { timing: { start: 20.467, end: 24.534 } },
                { timing: { start: 24.534, end: 28.267 } },
                { timing: { start: 28.267, end: 30.867 } },
                { timing: { start: 30.867, end: 33.834 } },
                { timing: { start: 33.834, end: 42.067 } },
                { timing: { start: 42.067, end: 46.167 } },
                { timing: { start: 46.167, end: 49.367 } },
                { timing: { start: 49.367, end: 54.367 } },
            ],
            interactions: [],
            hasSound: true,
            hasSubtitles: false,
        },
        "b8361dbd-4aec-40af-a8e3-f25bc8748661": {
            _id: "b8361dbd-4aec-40af-a8e3-f25bc8748661",
            version: "5",
            lastEditDate: 1724327734121,
            lastPublishDate: 1724139490362,
            owner: "jean-marc-joubert",
            title: "NIWEL BEAUTY",
            currentCover: {
                mediaUrl: "https://stories.join-stories.com/cdn-cgi/image/quality=65,format=auto,fit=cover,width=281,height=500,dpr=2/jean-marc-joubert/b8361dbd-4aec-40af-a8e3-f25bc8748661/poster-last.jpg",
                types: ["webp", "png"],
                contentType: "image/jpeg",
                cropCss: {},
            },
            containerLabel: "NIWEL BEAUTY",
            pageCount: 1,
            engagementCount: 0,
            videoUrl: "https://stories.join-stories.com/jean-marc-joubert/b8361dbd-4aec-40af-a8e3-f25bc8748661/story.mp4",
            chapters: [{ timing: { start: 0, end: 26.5 } }],
            interactions: [],
            hasSound: true,
            hasSubtitles: false,
        },
        "24762990-a7ed-49db-a2d9-27b5d28762ea": {
            _id: "24762990-a7ed-49db-a2d9-27b5d28762ea",
            version: "5",
            lastEditDate: 1722874017795,
            lastPublishDate: 1721895162842,
            owner: "jean-marc-joubert",
            title: "JMJ ETIENNE MARCEL - PRESTATIONS",
            currentCover: {
                mediaUrl: "https://stories.join-stories.com/cdn-cgi/image/quality=65,format=auto,fit=cover,width=281,height=500,dpr=2/jean-marc-joubert/24762990-a7ed-49db-a2d9-27b5d28762ea/poster-last.jpg",
                types: ["webp", "png"],
                contentType: "image/jpeg",
                cropCss: {},
            },
            containerLabel: "JMJ ETIENNE MARCEL - PRESTATIONS",
            pageCount: 6,
            engagementCount: 0,
            videoUrl: "https://stories.join-stories.com/jean-marc-joubert/24762990-a7ed-49db-a2d9-27b5d28762ea/story.mp4",
            chapters: [
                { timing: { start: 0, end: 3.533 } },
                { timing: { start: 3.533, end: 28.4 } },
                { timing: { start: 28.4, end: 40.667 } },
                { timing: { start: 40.667, end: 55.167 } },
                { timing: { start: 55.167, end: 69.567 } },
                { timing: { start: 69.567, end: 148.967 } },
            ],
            interactions: [],
            hasSound: true,
            hasSubtitles: false,
        },
        "21db896f-7799-4860-b534-c6682445bcec": {
            _id: "21db896f-7799-4860-b534-c6682445bcec",
            version: "5",
            lastEditDate: 1721977310772,
            lastPublishDate: 1721903874118,
            owner: "jean-marc-joubert",
            title: "JMJ LOUVRE - PRESTATIONS",
            currentCover: { mediaUrl: "https://videos.join-stories.com/optimized/mp4/short-sd-jean-marc-joubert__2ac14e10-d8d0-4b39-9596-7199776f6705.mp4", types: ["mp4"], contentType: "video/mp4", cropCss: {} },
            containerLabel: "JMJ LOUVRE - PRESTATIONS",
            pageCount: 2,
            engagementCount: 0,
            videoUrl: "https://stories.join-stories.com/jean-marc-joubert/21db896f-7799-4860-b534-c6682445bcec/story.mp4",
            chapters: [{ timing: { start: 0, end: 4 } }, { timing: { start: 4, end: 81.1 } }],
            interactions: [],
            hasSound: true,
            hasSubtitles: false,
        },
        "edb16b0a-ffff-4ee2-9653-0fa381480e28": {
            _id: "edb16b0a-ffff-4ee2-9653-0fa381480e28",
            version: "5",
            lastEditDate: 1720774108858,
            lastPublishDate: 1720774108858,
            owner: "jean-marc-joubert",
            title: "TOKIO INKARAMI - Protocole 2",
            currentCover: { mediaUrl: "https://videos.join-stories.com/optimized/mp4/short-sd-jean-marc-joubert__6dfaa62d-e009-44e3-b3e0-caae3f56de12.mp4", types: ["mp4"], contentType: "video/mp4", cropCss: {} },
            containerLabel: "TOKIO INKARAMI - PROTOCOLE",
            pageCount: 8,
            engagementCount: 0,
            videoUrl: "https://stories.join-stories.com/jean-marc-joubert/edb16b0a-ffff-4ee2-9653-0fa381480e28/story.mp4",
            chapters: [
                { timing: { start: 0, end: 2.967 } },
                { timing: { start: 2.967, end: 8.1 } },
                { timing: { start: 8.1, end: 11.9 } },
                { timing: { start: 11.9, end: 15.233 } },
                { timing: { start: 15.233, end: 19.3 } },
                { timing: { start: 19.3, end: 24.5 } },
                { timing: { start: 24.5, end: 28.8 } },
                { timing: { start: 28.8, end: 33.8 } },
            ],
            interactions: [],
            hasSound: true,
            hasSubtitles: false,
        },
        "4ee4360d-7869-4acb-89b4-cfe05089d803": {
            _id: "4ee4360d-7869-4acb-89b4-cfe05089d803",
            version: "5",
            lastEditDate: 1720778852781,
            lastPublishDate: 1720778852781,
            owner: "jean-marc-joubert",
            title: "CAP 3000 - PRESTATIONS",
            currentCover: { mediaUrl: "https://videos.join-stories.com/optimized/mp4/short-sd-jean-marc-joubert__96d1310b-b731-4cba-8018-9037b0fca241.mp4", types: ["mp4"], contentType: "video/mp4", cropCss: {} },
            containerLabel: "CAP 3000 - PRESTATIONS",
            pageCount: 8,
            engagementCount: 0,
            videoUrl: "https://stories.join-stories.com/jean-marc-joubert/4ee4360d-7869-4acb-89b4-cfe05089d803/story.mp4",
            chapters: [
                { timing: { start: 0, end: 5 } },
                { timing: { start: 5, end: 27.367 } },
                { timing: { start: 27.367, end: 43.5 } },
                { timing: { start: 43.5, end: 59.2 } },
                { timing: { start: 59.2, end: 79.4 } },
                { timing: { start: 79.4, end: 97.067 } },
                { timing: { start: 97.067, end: 116.034 } },
                { timing: { start: 116.034, end: 133.534 } },
            ],
            interactions: [],
            hasSound: true,
            hasSubtitles: false,
        },
        "8612dbad-967f-4f75-b192-94fabe745620": {
            _id: "8612dbad-967f-4f75-b192-94fabe745620",
            version: "5",
            lastEditDate: 1721640644061,
            lastPublishDate: 1720707286963,
            owner: "jean-marc-joubert",
            title: "L'OREAL - PROTOCOLE ABSOLUT REPAIR MOLECULAR",
            currentCover: { mediaUrl: "https://videos.join-stories.com/optimized/mp4/short-sd-jean-marc-joubert__414891c1-b7b6-41f2-8113-60f1377c706f.mp4", types: ["mp4"], contentType: "video/mp4", cropCss: {} },
            containerLabel: "L'OREAL - PROTOCOLE ABSOLUT REPAIR MOLECULAR",
            pageCount: 1,
            engagementCount: 0,
            videoUrl: "https://stories.join-stories.com/jean-marc-joubert/8612dbad-967f-4f75-b192-94fabe745620/story.mp4",
            chapters: [{ timing: { start: 0, end: 33.267 } }],
            interactions: [],
            hasSound: true,
            hasSubtitles: false,
        },
    },
    showWatermark: true,
};
(function () {
    "use strict";
    ((i, n) => {
        typeof window > "u" || (window.joinStories = { ...window.joinStories, animations: { ...window.joinStories?.animations, [i]: n } });
    })(
        "expend-from-left",
        `@keyframes bubbleAppear{0%{transform:translate(calc(-1 * var(--bubble-index) * var(--widget-width)))}to{transform:translate(0)}}.join-widget-element{z-index:calc(100 - var(--bubble-index))!important}.visible.join-widget-list:not(.no-animation) .join-widget-element{animation:bubbleAppear .6s .3s cubic-bezier(.3,1.1,.6,1) both,fade-in .5s .4s cubic-bezier(0,0,0,1) both!important}.visible.join-widget-list:not(.no-animation) .join-widget-label-content{animation:fade-in 1.5s .8s cubic-bezier(0,0,0,1) both!important}.visible.join-widget-list:not(.no-animation) li:nth-child(1) .join-widget-element,.visible.join-widget-list:not(.no-animation)~.join-carousel-button{animation:fade-in .3s .3s ease-out both}
`
    );
})();

(function () {
    "use strict";
    ((i, n) => {
        typeof window > "u" || (window.joinStories = { ...window.joinStories, animations: { ...window.joinStories?.animations, [i]: n } });
    })(
        "pulsating-waves",
        `@keyframes animationBefore{0%{box-shadow:0 0 0 0 var(--animated-border-color);opacity:.8}50%{box-shadow:0 0 0 20px var(--animated-border-color);opacity:0}}@keyframes animationAfter{0%{box-shadow:0 0 0 0 var(--animated-border-color);opacity:.8}85%{box-shadow:0 0 0 20px var(--animated-border-color);opacity:0}}@keyframes pulseAnimation{0%{transform:scale(1)}10%{transform:scale(.95)}20%{transform:scale(1)}}.visible li:nth-child(1) .join-widget-element{animation:fade-in .5s,pulseAnimation 3s 1.3s infinite linear both!important}.visible.expend-from-left li:nth-child(1) .join-widget-element{animation:fade-in .3s .3s ease-in-out both,pulseAnimation 3s 1.3s infinite linear both!important}.visible.join-widget-list.no-animation li:nth-child(1) .join-widget-element{animation:pulseAnimation 3s 1.3s infinite linear both!important}li:nth-child(1) .join-animation:before,li:nth-child(1) .join-animation:after{content:"";width:var(--widget-width);height:var(--widget-height);top:50%;left:50%;transform:translate(-50%,-50%);position:absolute;border-radius:50%;opacity:0;z-index:-2}.visible li:nth-child(1) .join-animation:before{border-width:2px;animation:3s 2s infinite linear animationBefore}.visible li:nth-child(1) .join-animation:after{border-width:0;animation:3s 2s infinite linear animationAfter}.join-animation{position:absolute;width:100%;height:var(--widget-height);top:0;left:0;margin-top:2px}.join-animation div{position:absolute;width:var(--widget-width);height:var(--widget-height);top:50%;left:50%;transform:translate(-50%,-50%);border-radius:50%;z-index:-1}
`
    );
})();
(function () {
    "use strict";
    (function (v) {
        !self.JoinPreact && v();
    })(function () {
        var v,
            f,
            W,
            a,
            i_,
            d_,
            B,
            v_,
            O,
            G = {},
            m_ = [],
            k_ = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,
            n_ = Array.isArray;
        function A(t, _) {
            for (var e in _) t[e] = _[e];
            return t;
        }
        function $(t) {
            var _ = t.parentNode;
            _ && _.removeChild(t);
        }
        function l_(t, _, e) {
            var u,
                c,
                i,
                p = {};
            for (i in _) i == "key" ? (u = _[i]) : i == "ref" ? (c = _[i]) : (p[i] = _[i]);
            if ((2 < arguments.length && (p.children = 3 < arguments.length ? v.call(arguments, 2) : e), typeof t == "function" && t.defaultProps != null)) for (i in t.defaultProps) p[i] === void 0 && (p[i] = t.defaultProps[i]);
            return Q(t, p, u, c, null);
        }
        function Q(t, _, e, u, c) {
            return (t = { type: t, props: _, key: e, ref: u, __k: null, __: null, __b: 0, __e: null, __d: void 0, __c: null, __h: null, constructor: void 0, __v: c ?? ++W }), c == null && f.vnode != null && f.vnode(t), t;
        }
        function X(t) {
            return t.children;
        }
        function j(t, _) {
            (this.props = t), (this.context = _);
        }
        function o_(t, _) {
            if (_ == null) return t.__ ? o_(t.__, t.__.__k.indexOf(t) + 1) : null;
            for (var e; _ < t.__k.length; _++) if ((e = t.__k[_]) != null && e.__e != null) return e.__d || e.__e;
            return typeof t.type == "function" ? o_(t) : null;
        }
        function c_(t) {
            ((!t.__d && (t.__d = !0) && a.push(t) && !z.__r++) || i_ !== f.debounceRendering) && ((i_ = f.debounceRendering) || d_)(z);
        }
        function z() {
            var t, _, e, u, c, i, p, E;
            for (a.sort(B); (_ = a.shift()); )
                _.__d &&
                    ((t = a.length),
                    (c = void 0),
                    (p = (i = (_ = _).__v).__e),
                    (E = _.__P) &&
                        ((e = []),
                        (u = []),
                        ((c = A({}, i)).__v = i.__v + 1),
                        g(E, i, c, _.__n, E.ownerSVGElement !== void 0, i.__h != null ? [p] : null, e, p ?? o_(i), i.__h, u),
                        H(e, i, u),
                        i.__e != p &&
                            (function x(w) {
                                var y, n;
                                if ((w = w.__) != null && w.__c != null) {
                                    for (w.__e = w.__c.base = null, y = 0; y < w.__k.length; y++)
                                        if ((n = w.__k[y]) != null && n.__e != null) {
                                            w.__e = w.__c.base = n.__e;
                                            break;
                                        }
                                    return x(w);
                                }
                            })(i)),
                    a.length > t && a.sort(B));
            z.__r = 0;
        }
        function f_(t, _, e, u, c, i, p, E, x, w, y) {
            var n,
                b,
                s,
                J,
                p_,
                U,
                d,
                R,
                N = 0,
                S = (u && u.__k) || m_,
                Z = S.length,
                a_ = Z,
                u_ = _.length;
            for (e.__k = [], n = 0; n < u_; n++)
                (s = e.__k[n] =
                    (s = _[n]) == null || typeof s == "boolean" || typeof s == "function"
                        ? null
                        : typeof s == "string" || typeof s == "number" || typeof s == "bigint"
                        ? Q(null, s, null, null, s)
                        : n_(s)
                        ? Q(X, { children: s }, null, null, null)
                        : 0 < s.__b
                        ? Q(s.type, s.props, s.key, s.ref || null, s.__v)
                        : s) != null
                    ? ((s.__ = e),
                      (s.__b = e.__b + 1),
                      (d = (function (__, k, h, q) {
                          var T = __.key,
                              K = __.type,
                              V = h - 1,
                              C = h + 1,
                              F = k[h];
                          if (F === null || (F && T == F.key && K === F.type)) return h;
                          if ((F != null ? 1 : 0) < q)
                              for (; 0 <= V || C < k.length; ) {
                                  if (0 <= V) {
                                      if ((F = k[V]) && T == F.key && K === F.type) return V;
                                      V--;
                                  }
                                  if (C < k.length) {
                                      if ((F = k[C]) && T == F.key && K === F.type) return C;
                                      C++;
                                  }
                              }
                          return -1;
                      })(s, S, (U = n + N), a_)) === -1
                          ? (b = G)
                          : ((b = S[d] || G), (S[d] = void 0), a_--),
                      g(t, s, b, c, i, p, E, x, w, y),
                      (J = s.__e),
                      (R = s.ref) && b.ref != R && (b.ref && r_(b.ref, null, s), y.push(R, s.__c || J, s)),
                      J != null &&
                          (p_ == null && (p_ = J),
                          (R = b === G || b.__v === null) ? d == -1 && N-- : d !== U && (d === U + 1 ? N++ : U < d ? (u_ - U < a_ ? (N += d - U) : N--) : (N = d < U && d == U - 1 ? d - U : 0)),
                          (U = n + N),
                          typeof s.type != "function" || (d === U && b.__k !== s.__k)
                              ? typeof s.type == "function" || (d === U && !R)
                                  ? s.__d !== void 0
                                      ? ((x = s.__d), (s.__d = void 0))
                                      : (x = J.nextSibling)
                                  : (x = s_(t, J, x))
                              : (x = (function __(k, h, q) {
                                    for (var T, K = k.__k, V = 0; K && V < K.length; V++) (T = K[V]) && ((T.__ = k), (h = typeof T.type == "function" ? __(T, h, q) : s_(q, T.__e, h)));
                                    return h;
                                })(s, x, t)),
                          typeof e.type == "function" && (e.__d = x)))
                    : (b = S[n]) && b.key == null && b.__e && (b.__e == x && ((b.__ = u), (x = o_(b))), P(b, b, !1), (S[n] = null));
            for (e.__e = p_, n = Z; n--; ) S[n] != null && (typeof e.type == "function" && S[n].__e != null && S[n].__e == e.__d && (e.__d = S[n].__e.nextSibling), P(S[n], S[n]));
        }
        function s_(t, _, e) {
            return e == null || e.parentNode !== t ? t.insertBefore(_, null) : (_ == e && _.parentNode != null) || t.insertBefore(_, e), _.nextSibling;
        }
        function y_(t, _, e) {
            _[0] === "-" ? t.setProperty(_, e ?? "") : (t[_] = e == null ? "" : typeof e != "number" || k_.test(_) ? e : e + "px");
        }
        function o(t, _, e, u, c) {
            var i;
            _: if (_ === "style")
                if (typeof e == "string") t.style.cssText = e;
                else {
                    if ((typeof u == "string" && (t.style.cssText = u = ""), u)) for (_ in u) (e && _ in e) || y_(t.style, _, "");
                    if (e) for (_ in e) (u && e[_] === u[_]) || y_(t.style, _, e[_]);
                }
            else if (_[0] === "o" && _[1] === "n")
                (i = _ !== (_ = _.replace(/(PointerCapture)$|Capture$/, "$1"))),
                    (_ = (_.toLowerCase() in t ? _.toLowerCase() : _).slice(2)),
                    t.l || (t.l = {}),
                    (t.l[_ + i] = e),
                    e ? (u ? (e.u = u.u) : ((e.u = Date.now()), t.addEventListener(_, i ? l : r, i))) : t.removeEventListener(_, i ? l : r, i);
            else if (_ !== "dangerouslySetInnerHTML") {
                if (c) _ = _.replace(/xlink(H|:h)/, "h").replace(/sName$/, "s");
                else if (_ !== "width" && _ !== "height" && _ !== "href" && _ !== "list" && _ !== "form" && _ !== "tabIndex" && _ !== "download" && _ !== "rowSpan" && _ !== "colSpan" && _ !== "role" && _ in t)
                    try {
                        t[_] = e ?? "";
                        break _;
                    } catch {}
                typeof e != "function" && (e == null || (e === !1 && _[4] !== "-") ? t.removeAttribute(_) : t.setAttribute(_, e));
            }
        }
        function r(t) {
            var _ = this.l[t.type + !1];
            if (t.t) {
                if (t.t <= _.u) return;
            } else t.t = Date.now();
            return _(f.event ? f.event(t) : t);
        }
        function l(t) {
            return this.l[t.type + !0](f.event ? f.event(t) : t);
        }
        function g(t, _, e, u, c, i, p, E, x, w) {
            var y,
                n,
                b,
                s,
                J,
                p_,
                U,
                d,
                R,
                N,
                S,
                Z,
                a_,
                u_,
                __,
                k = _.type;
            if (_.constructor === void 0) {
                e.__h != null && ((x = e.__h), (E = _.__e = e.__e), (_.__h = null), (i = [E])), (y = f.__b) && y(_);
                _: if (typeof k == "function")
                    try {
                        if (
                            ((d = _.props),
                            (R = (y = k.contextType) && u[y.__c]),
                            (N = y ? (R ? R.props.value : y.__) : u),
                            e.__c
                                ? (U = (n = _.__c = e.__c).__ = n.__E)
                                : ("prototype" in k && k.prototype.render ? (_.__c = n = new k(d, N)) : ((_.__c = n = new j(d, N)), (n.constructor = k), (n.render = Y)),
                                  R && R.sub(n),
                                  (n.props = d),
                                  n.state || (n.state = {}),
                                  (n.context = N),
                                  (n.__n = u),
                                  (b = n.__d = !0),
                                  (n.__h = []),
                                  (n._sb = [])),
                            n.__s == null && (n.__s = n.state),
                            k.getDerivedStateFromProps != null && (n.__s == n.state && (n.__s = A({}, n.__s)), A(n.__s, k.getDerivedStateFromProps(d, n.__s))),
                            (s = n.props),
                            (J = n.state),
                            (n.__v = _),
                            b)
                        )
                            k.getDerivedStateFromProps == null && n.componentWillMount != null && n.componentWillMount(), n.componentDidMount != null && n.__h.push(n.componentDidMount);
                        else {
                            if (
                                (k.getDerivedStateFromProps == null && d !== s && n.componentWillReceiveProps != null && n.componentWillReceiveProps(d, N),
                                !n.__e && ((n.shouldComponentUpdate != null && n.shouldComponentUpdate(d, n.__s, N) === !1) || _.__v === e.__v))
                            ) {
                                for (
                                    _.__v !== e.__v && ((n.props = d), (n.state = n.__s), (n.__d = !1)),
                                        _.__e = e.__e,
                                        _.__k = e.__k,
                                        _.__k.forEach(function (h) {
                                            h && (h.__ = _);
                                        }),
                                        S = 0;
                                    S < n._sb.length;
                                    S++
                                )
                                    n.__h.push(n._sb[S]);
                                (n._sb = []), n.__h.length && p.push(n);
                                break _;
                            }
                            n.componentWillUpdate != null && n.componentWillUpdate(d, n.__s, N),
                                n.componentDidUpdate != null &&
                                    n.__h.push(function () {
                                        n.componentDidUpdate(s, J, p_);
                                    });
                        }
                        if (((n.context = N), (n.props = d), (n.__P = t), (n.__e = !1), (Z = f.__r), (a_ = 0), "prototype" in k && k.prototype.render)) {
                            for (n.state = n.__s, n.__d = !1, Z && Z(_), y = n.render(n.props, n.state, n.context), u_ = 0; u_ < n._sb.length; u_++) n.__h.push(n._sb[u_]);
                            n._sb = [];
                        } else for (; (n.__d = !1), Z && Z(_), (y = n.render(n.props, n.state, n.context)), (n.state = n.__s), n.__d && ++a_ < 25; );
                        (n.state = n.__s),
                            n.getChildContext != null && (u = A(A({}, u), n.getChildContext())),
                            b || n.getSnapshotBeforeUpdate == null || (p_ = n.getSnapshotBeforeUpdate(s, J)),
                            f_(t, n_((__ = y != null && y.type === X && y.key == null ? y.props.children : y)) ? __ : [__], _, e, u, c, i, p, E, x, w),
                            (n.base = _.__e),
                            (_.__h = null),
                            n.__h.length && p.push(n),
                            U && (n.__E = n.__ = null);
                    } catch (h) {
                        (_.__v = null), (!x && i == null) || ((_.__e = E), (_.__h = !!x), (i[i.indexOf(E)] = null)), f.__e(h, _, e);
                    }
                else
                    i == null && _.__v === e.__v
                        ? ((_.__k = e.__k), (_.__e = e.__e))
                        : (_.__e = (function (h, q, T, K, V, C, F, h_, E_) {
                              var g_,
                                  C_,
                                  t_,
                                  e_ = T.props,
                                  L = q.props,
                                  I = q.type,
                                  m = 0;
                              if ((I === "svg" && (V = !0), C != null)) {
                                  for (; m < C.length; m++)
                                      if ((g_ = C[m]) && "setAttribute" in g_ == !!I && (I ? g_.localName === I : g_.nodeType === 3)) {
                                          (h = g_), (C[m] = null);
                                          break;
                                      }
                              }
                              if (h == null) {
                                  if (I === null) return document.createTextNode(L);
                                  (h = V ? document.createElementNS("http://www.w3.org/2000/svg", I) : document.createElement(I, L.is && L)), (C = null), (h_ = !1);
                              }
                              if (I === null) e_ === L || (h_ && h.data === L) || (h.data = L);
                              else {
                                  if (((C = C && v.call(h.childNodes)), (C_ = (e_ = T.props || G).dangerouslySetInnerHTML), (t_ = L.dangerouslySetInnerHTML), !h_)) {
                                      if (C != null) for (e_ = {}, m = 0; m < h.attributes.length; m++) e_[h.attributes[m].name] = h.attributes[m].value;
                                      (!t_ && !C_) || (t_ && ((C_ && t_.__html == C_.__html) || t_.__html === h.innerHTML)) || (h.innerHTML = (t_ && t_.__html) || "");
                                  }
                                  if (
                                      ((function (P_, b_, H_, x_, S_) {
                                          for (var D in H_) D === "children" || D === "key" || D in b_ || o(P_, D, null, H_[D], x_);
                                          for (D in b_) (S_ && typeof b_[D] != "function") || D === "children" || D === "key" || D === "value" || D === "checked" || H_[D] === b_[D] || o(P_, D, b_[D], H_[D], x_);
                                      })(h, L, e_, V, h_),
                                      t_)
                                  )
                                      q.__k = [];
                                  else if ((f_(h, n_((m = q.props.children)) ? m : [m], q, T, K, V && I !== "foreignObject", C, F, C ? C[0] : T.__k && o_(T, 0), h_, E_), C != null)) for (m = C.length; m--; ) C[m] != null && $(C[m]);
                                  h_ ||
                                      ("value" in L && (m = L.value) !== void 0 && (m !== h.value || (I === "progress" && !m) || (I === "option" && m !== e_.value)) && o(h, "value", m, e_.value, !1),
                                      "checked" in L && (m = L.checked) !== void 0 && m !== h.checked && o(h, "checked", m, e_.checked, !1));
                              }
                              return h;
                          })(e.__e, _, e, u, c, i, p, x, w));
                (y = f.diffed) && y(_);
            }
        }
        function H(t, _, e) {
            for (var u = 0; u < e.length; u++) r_(e[u], e[++u], e[++u]);
            f.__c && f.__c(_, t),
                t.some(function (c) {
                    try {
                        (t = c.__h),
                            (c.__h = []),
                            t.some(function (i) {
                                i.call(c);
                            });
                    } catch (i) {
                        f.__e(i, c.__v);
                    }
                });
        }
        function r_(t, _, e) {
            try {
                typeof t == "function" ? t(_) : (t.current = _);
            } catch (u) {
                f.__e(u, e);
            }
        }
        function P(t, _, e) {
            var u, c;
            if ((f.unmount && f.unmount(t), !(u = t.ref) || (u.current && u.current !== t.__e) || r_(u, null, _), (u = t.__c) != null)) {
                if (u.componentWillUnmount)
                    try {
                        u.componentWillUnmount();
                    } catch (i) {
                        f.__e(i, _);
                    }
                (u.base = u.__P = null), (t.__c = void 0);
            }
            if ((u = t.__k)) for (c = 0; c < u.length; c++) u[c] && P(u[c], _, e || typeof t.type != "function");
            e || t.__e == null || $(t.__e), (t.__ = t.__e = t.__d = void 0);
        }
        function Y(t, _, e) {
            return this.constructor(t, e);
        }
        function M(t, _, e) {
            var u, c, i, p;
            f.__ && f.__(t, _),
                (c = (u = typeof e == "function") ? null : (e && e.__k) || _.__k),
                (i = []),
                (p = []),
                g(_, (t = ((!u && e) || _).__k = l_(X, null, [t])), c || G, G, _.ownerSVGElement !== void 0, !u && e ? [e] : !c && _.firstChild ? v.call(_.childNodes) : null, i, !u && e ? e : c ? c.__e : _.firstChild, u, p),
                H(i, t, p);
        }
        (v = m_.slice),
            (f = {
                __e: function (t, _, e, u) {
                    for (var c, i, p; (_ = _.__); )
                        if ((c = _.__c) && !c.__)
                            try {
                                if (((i = c.constructor) && i.getDerivedStateFromError != null && (c.setState(i.getDerivedStateFromError(t)), (p = c.__d)), c.componentDidCatch != null && (c.componentDidCatch(t, u || {}), (p = c.__d)), p))
                                    return (c.__E = c);
                            } catch (E) {
                                t = E;
                            }
                    throw t;
                },
            }),
            (W = 0),
            (O = function (t) {
                return t != null && t.constructor === void 0;
            }),
            (j.prototype.setState = function (t, _) {
                var e = this.__s != null && this.__s !== this.state ? this.__s : (this.__s = A({}, this.state));
                (t = typeof t == "function" ? t(A({}, e), this.props) : t) && A(e, t), t != null && this.__v && (_ && this._sb.push(_), c_(this));
            }),
            (j.prototype.forceUpdate = function (t) {
                this.__v && ((this.__e = !0), t && this.__h.push(t), c_(this));
            }),
            (j.prototype.render = X),
            (a = []),
            (d_ = typeof Promise == "function" ? Promise.prototype.then.bind(Promise.resolve()) : setTimeout),
            (B = function (t, _) {
                return t.__v.__b - _.__v.__b;
            }),
            (z.__r = 0),
            (v_ = 0),
            (O = {
                __proto__: null,
                render: M,
                hydrate: function t(_, e) {
                    M(_, e, t);
                },
                createElement: l_,
                h: l_,
                Fragment: X,
                createRef: function () {
                    return { current: null };
                },
                isValidElement: O,
                Component: j,
                cloneElement: function (t, _, e) {
                    var u,
                        c,
                        i,
                        p,
                        E = A({}, t.props);
                    for (i in (t.type && t.type.defaultProps && (p = t.type.defaultProps), _)) i == "key" ? (u = _[i]) : i == "ref" ? (c = _[i]) : (E[i] = (_[i] === void 0 && p !== void 0 ? p : _)[i]);
                    return 2 < arguments.length && (E.children = 3 < arguments.length ? v.call(arguments, 2) : e), Q(t.type, E, u || t.key, c || t.ref, null);
                },
                createContext: function (t, _) {
                    return (
                        (t = {
                            __c: (_ = "__cC" + v_++),
                            __: t,
                            Consumer: function (e, u) {
                                return e.children(u);
                            },
                            Provider: function (e) {
                                var u, c;
                                return (
                                    this.getChildContext ||
                                        ((u = []),
                                        (((c = {})[_] = this).getChildContext = function () {
                                            return c;
                                        }),
                                        (this.shouldComponentUpdate = function (i) {
                                            this.props.value !== i.value &&
                                                u.some(function (p) {
                                                    (p.__e = !0), c_(p);
                                                });
                                        }),
                                        (this.sub = function (i) {
                                            u.push(i);
                                            var p = i.componentWillUnmount;
                                            i.componentWillUnmount = function () {
                                                u.splice(u.indexOf(i), 1), p && p.call(i);
                                            };
                                        })),
                                    e.children
                                );
                            },
                        }),
                        (t.Provider.__ = t.Consumer.contextType = t)
                    );
                },
                toChildArray: function t(_, e) {
                    return (
                        (e = e || []),
                        _ != null &&
                            typeof _ != "boolean" &&
                            (n_(_)
                                ? _.some(function (u) {
                                      t(u, e);
                                  })
                                : e.push(_)),
                        e
                    );
                },
                options: f,
            }),
            (self.JoinPreact = O);
    }),
        (function (v, f) {
            !(v || self).JoinPreactHooks && f(((v || self).JoinPreactHooks = {}), v.JoinPreact);
        })(globalThis, function (v, f) {
            var W,
                a,
                i_,
                d_,
                B = 0,
                v_ = [],
                O = [],
                G = f.options.__b,
                m_ = f.options.__r,
                k_ = f.options.diffed,
                n_ = f.options.__c,
                A = f.options.unmount;
            function $(o, r) {
                return f.options.__h && f.options.__h(a, o, B || r), (B = 0), (r = a.__H || (a.__H = { __: [], __h: [] })), o >= r.__.length && r.__.push({ __V: O }), r.__[o];
            }
            function l_(o) {
                return (B = 1), Q(y_, o);
            }
            function Q(o, r, l) {
                var g,
                    H,
                    r_,
                    P = $(W++, 2);
                return (
                    (P.t = o),
                    P.__c ||
                        ((P.__ = [
                            l ? l(r) : y_(void 0, r),
                            function (t) {
                                var M = (P.__N || P.__)[0],
                                    t = P.t(M, t);
                                M !== t && ((P.__N = [t, P.__[1]]), P.__c.setState({}));
                            },
                        ]),
                        (P.__c = a).u) ||
                        ((g = function (Y, M, t) {
                            if (!P.__c.__H) return !0;
                            var _ = P.__c.__H.__.filter(function (u) {
                                return u.__c;
                            });
                            if (
                                _.every(function (u) {
                                    return !u.__N;
                                })
                            )
                                return !H || H.call(this, Y, M, t);
                            var e = !1;
                            return (
                                _.forEach(function (u) {
                                    var c;
                                    u.__N && ((c = u.__[0]), (u.__ = u.__N), (u.__N = void 0), c !== u.__[0] && (e = !0));
                                }),
                                !(!e && P.__c.props === Y) && (!H || H.call(this, Y, M, t))
                            );
                        }),
                        (a.u = !0),
                        (H = a.shouldComponentUpdate),
                        (r_ = a.componentWillUpdate),
                        (a.componentWillUpdate = function (Y, M, t) {
                            var _;
                            this.__e && ((_ = H), (H = void 0), g(Y, M, t), (H = _)), r_ && r_.call(this, Y, M, t);
                        }),
                        (a.shouldComponentUpdate = g)),
                    P.__N || P.__
                );
            }
            function X(o, r) {
                var l = $(W++, 4);
                !f.options.__s && s_(l.__H, r) && ((l.__ = o), (l.i = r), a.__h.push(l));
            }
            function j(o, r) {
                var l = $(W++, 7);
                return s_(l.__H, r) ? ((l.__V = o()), (l.i = r), (l.__h = o), l.__V) : l.__;
            }
            function o_() {
                for (var o; (o = v_.shift()); )
                    if (o.__P && o.__H)
                        try {
                            o.__H.__h.forEach(z), o.__H.__h.forEach(f_), (o.__H.__h = []);
                        } catch (r) {
                            (o.__H.__h = []), f.options.__e(r, o.__v);
                        }
            }
            (f.options.__b = function (o) {
                (a = null), G && G(o);
            }),
                (f.options.__r = function (o) {
                    m_ && m_(o),
                        (W = 0),
                        (o = (a = o.__c).__H),
                        o &&
                            (i_ === a
                                ? ((o.__h = []),
                                  (a.__h = []),
                                  o.__.forEach(function (r) {
                                      r.__N && (r.__ = r.__N), (r.__V = O), (r.__N = r.i = void 0);
                                  }))
                                : (o.__h.forEach(z), o.__h.forEach(f_), (o.__h = []), (W = 0))),
                        (i_ = a);
                }),
                (f.options.diffed = function (o) {
                    k_ && k_(o),
                        (o = o.__c),
                        o &&
                            o.__H &&
                            (!o.__H.__h.length ||
                                (v_.push(o) !== 1 && d_ === f.options.requestAnimationFrame) ||
                                (
                                    (d_ = f.options.requestAnimationFrame) ||
                                    function (r) {
                                        function l() {
                                            clearTimeout(H), c_ && cancelAnimationFrame(g), setTimeout(r);
                                        }
                                        var g,
                                            H = setTimeout(l, 100);
                                        c_ && (g = requestAnimationFrame(l));
                                    }
                                )(o_),
                            o.__H.__.forEach(function (r) {
                                r.i && (r.__H = r.i), r.__V !== O && (r.__ = r.__V), (r.i = void 0), (r.__V = O);
                            })),
                        (i_ = a = null);
                }),
                (f.options.__c = function (o, r) {
                    r.some(function (l) {
                        try {
                            l.__h.forEach(z),
                                (l.__h = l.__h.filter(function (g) {
                                    return !g.__ || f_(g);
                                }));
                        } catch (g) {
                            r.some(function (H) {
                                H.__h && (H.__h = []);
                            }),
                                (r = []),
                                f.options.__e(g, l.__v);
                        }
                    }),
                        n_ && n_(o, r);
                }),
                (f.options.unmount = function (l) {
                    A && A(l);
                    var r,
                        l = l.__c;
                    l &&
                        l.__H &&
                        (l.__H.__.forEach(function (g) {
                            try {
                                z(g);
                            } catch (H) {
                                r = H;
                            }
                        }),
                        (l.__H = void 0),
                        r && f.options.__e(r, l.__v));
                });
            var c_ = typeof requestAnimationFrame == "function";
            function z(o) {
                var r = a,
                    l = o.__c;
                typeof l == "function" && ((o.__c = void 0), l()), (a = r);
            }
            function f_(o) {
                var r = a;
                (o.__c = o.__()), (a = r);
            }
            function s_(o, r) {
                return (
                    !o ||
                    o.length !== r.length ||
                    r.some(function (l, g) {
                        return l !== o[g];
                    })
                );
            }
            function y_(o, r) {
                return typeof r == "function" ? r(o) : r;
            }
            (v.useCallback = function (o, r) {
                return (
                    (B = 8),
                    j(function () {
                        return o;
                    }, r)
                );
            }),
                (v.useContext = function (o) {
                    var r = a.context[o.__c],
                        l = $(W++, 9);
                    return (l.c = o), r ? (l.__ == null && ((l.__ = !0), r.sub(a)), r.props.value) : o.__;
                }),
                (v.useDebugValue = function (o, r) {
                    f.options.useDebugValue && f.options.useDebugValue(r ? r(o) : o);
                }),
                (v.useEffect = function (o, r) {
                    var l = $(W++, 3);
                    !f.options.__s && s_(l.__H, r) && ((l.__ = o), (l.i = r), a.__H.__h.push(l));
                }),
                (v.useErrorBoundary = function (o) {
                    var r = $(W++, 10),
                        l = l_();
                    return (
                        (r.__ = o),
                        a.componentDidCatch ||
                            (a.componentDidCatch = function (g, H) {
                                r.__ && r.__(g, H), l[1](g);
                            }),
                        [
                            l[0],
                            function () {
                                l[1](void 0);
                            },
                        ]
                    );
                }),
                (v.useId = function () {
                    var o = $(W++, 11);
                    if (!o.__) {
                        for (var r = a.__v; r !== null && !r.__m && r.__ !== null; ) r = r.__;
                        var l = r.__m || (r.__m = [0, 0]);
                        o.__ = "P" + l[0] + "-" + l[1]++;
                    }
                    return o.__;
                }),
                (v.useImperativeHandle = function (o, r, l) {
                    (B = 6),
                        X(
                            function () {
                                return typeof o == "function"
                                    ? (o(r()),
                                      function () {
                                          return o(null);
                                      })
                                    : o
                                    ? ((o.current = r()),
                                      function () {
                                          return (o.current = null);
                                      })
                                    : void 0;
                            },
                            l == null ? l : l.concat(o)
                        );
                }),
                (v.useLayoutEffect = X),
                (v.useMemo = j),
                (v.useReducer = Q),
                (v.useRef = function (o) {
                    return (
                        (B = 5),
                        j(function () {
                            return { current: o };
                        }, [])
                    );
                }),
                (v.useState = l_);
        });
})();

(function (g, _) {
    "use strict";
    const ot = (e, t, n) => {
        window.joinStories?.components?.[e]?.[t] ||
            (window.joinStories || (window.joinStories = {}),
            window.joinStories.components || (window.joinStories.components = {}),
            window.joinStories.components[e] || (window.joinStories.components[e] = {}),
            (window.joinStories.components[e] = { ...window.joinStories.components[e], [t]: n }));
    };
    var ce = 0;
    function c(e, t, n, i, o, s) {
        var r,
            a,
            l = {};
        for (a in t) a == "ref" ? (r = t[a]) : (l[a] = t[a]);
        var u = { type: e, props: l, key: n, ref: r, __k: null, __: null, __b: 0, __e: null, __d: void 0, __c: null, __h: null, constructor: void 0, __v: --ce, __source: o, __self: s };
        if (typeof e == "function" && (r = e.defaultProps)) for (a in r) l[a] === void 0 && (l[a] = r[a]);
        return _.options.vnode && _.options.vnode(u), u;
    }
    const M = ({ children: e, css: t }) => c(_.Fragment, { children: [c("style", { children: t }), e] }),
        $ = "Montserrat_600",
        le = "https://fonts.gstatic.com/s/montserrat/v18/JTURjIg1_i6t8kCHKm45_bZF7g7J_950vCo.ttf";
    function de(e, t) {
        for (var n in t) e[n] = t[n];
        return e;
    }
    function st(e, t) {
        for (var n in e) if (n !== "__source" && !(n in t)) return !0;
        for (var i in t) if (i !== "__source" && e[i] !== t[i]) return !0;
        return !1;
    }
    function rt(e) {
        this.props = e;
    }
    ((rt.prototype = new _.Component()).isPureReactComponent = !0),
        (rt.prototype.shouldComponentUpdate = function (e, t) {
            return st(this.props, e) || st(this.state, t);
        });
    var at = _.options.__b;
    _.options.__b = function (e) {
        e.type && e.type.__f && e.ref && ((e.props.ref = e.ref), (e.ref = null)), at && at(e);
    };
    var ue = _.options.__e;
    _.options.__e = function (e, t, n, i) {
        if (e.then) {
            for (var o, s = t; (s = s.__); ) if ((o = s.__c) && o.__c) return t.__e == null && ((t.__e = n.__e), (t.__k = n.__k)), o.__c(e, t);
        }
        ue(e, t, n, i);
    };
    var ct = _.options.unmount;
    function lt(e, t, n) {
        return (
            e &&
                (e.__c &&
                    e.__c.__H &&
                    (e.__c.__H.__.forEach(function (i) {
                        typeof i.__c == "function" && i.__c();
                    }),
                    (e.__c.__H = null)),
                (e = de({}, e)).__c != null && (e.__c.__P === n && (e.__c.__P = t), (e.__c = null)),
                (e.__k =
                    e.__k &&
                    e.__k.map(function (i) {
                        return lt(i, t, n);
                    }))),
            e
        );
    }
    function dt(e, t, n) {
        return (
            e &&
                n &&
                ((e.__v = null),
                (e.__k =
                    e.__k &&
                    e.__k.map(function (i) {
                        return dt(i, t, n);
                    })),
                e.__c && e.__c.__P === t && (e.__e && n.insertBefore(e.__e, e.__d), (e.__c.__e = !0), (e.__c.__P = n))),
            e
        );
    }
    function J() {
        (this.__u = 0), (this.t = null), (this.__b = null);
    }
    function ut(e) {
        var t = e.__.__c;
        return t && t.__a && t.__a(e);
    }
    function V() {
        (this.u = null), (this.o = null);
    }
    (_.options.unmount = function (e) {
        var t = e.__c;
        t && t.__R && t.__R(), t && e.__h === !0 && (e.type = null), ct && ct(e);
    }),
        ((J.prototype = new _.Component()).__c = function (e, t) {
            var n = t.__c,
                i = this;
            i.t == null && (i.t = []), i.t.push(n);
            var o = ut(i.__v),
                s = !1,
                r = function () {
                    s || ((s = !0), (n.__R = null), o ? o(a) : a());
                };
            n.__R = r;
            var a = function () {
                    if (!--i.__u) {
                        if (i.state.__a) {
                            var u = i.state.__a;
                            i.__v.__k[0] = dt(u, u.__c.__P, u.__c.__O);
                        }
                        var d;
                        for (i.setState({ __a: (i.__b = null) }); (d = i.t.pop()); ) d.forceUpdate();
                    }
                },
                l = t.__h === !0;
            i.__u++ || l || i.setState({ __a: (i.__b = i.__v.__k[0]) }), e.then(r, r);
        }),
        (J.prototype.componentWillUnmount = function () {
            this.t = [];
        }),
        (J.prototype.render = function (e, t) {
            if (this.__b) {
                if (this.__v.__k) {
                    var n = document.createElement("div"),
                        i = this.__v.__k[0].__c;
                    this.__v.__k[0] = lt(this.__b, n, (i.__O = i.__P));
                }
                this.__b = null;
            }
            var o = t.__a && _.createElement(_.Fragment, null, e.fallback);
            return o && (o.__h = null), [_.createElement(_.Fragment, null, t.__a ? null : e.children), o];
        });
    var ht = function (e, t, n) {
        if ((++n[1] === n[0] && e.o.delete(t), e.props.revealOrder && (e.props.revealOrder[0] !== "t" || !e.o.size)))
            for (n = e.u; n; ) {
                for (; n.length > 3; ) n.pop()();
                if (n[1] < n[0]) break;
                e.u = n = n[2];
            }
    };
    ((V.prototype = new _.Component()).__a = function (e) {
        var t = this,
            n = ut(t.__v),
            i = t.o.get(e);
        return (
            i[0]++,
            function (o) {
                var s = function () {
                    t.props.revealOrder ? (i.push(o), ht(t, e, i)) : o();
                };
                n ? n(s) : s();
            }
        );
    }),
        (V.prototype.render = function (e) {
            (this.u = null), (this.o = new Map());
            var t = _.toChildArray(e.children);
            e.revealOrder && e.revealOrder[0] === "b" && t.reverse();
            for (var n = t.length; n--; ) this.o.set(t[n], (this.u = [1, 0, this.u]));
            return e.children;
        }),
        (V.prototype.componentDidUpdate = V.prototype.componentDidMount = function () {
            var e = this;
            this.o.forEach(function (t, n) {
                ht(e, n, t);
            });
        });
    var he = (typeof Symbol < "u" && Symbol.for && Symbol.for("react.element")) || 60103,
        pe = /^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,
        ge = /^on(Ani|Tra|Tou|BeforeInp|Compo)/,
        fe = /[A-Z0-9]/g,
        _e = typeof document < "u",
        ve = function (e) {
            return (typeof Symbol < "u" && typeof Symbol() == "symbol" ? /fil|che|rad/ : /fil|che|ra/).test(e);
        };
    (_.Component.prototype.isReactComponent = {}),
        ["componentWillMount", "componentWillReceiveProps", "componentWillUpdate"].forEach(function (e) {
            Object.defineProperty(_.Component.prototype, e, {
                configurable: !0,
                get: function () {
                    return this["UNSAFE_" + e];
                },
                set: function (t) {
                    Object.defineProperty(this, e, { configurable: !0, writable: !0, value: t });
                },
            });
        });
    var pt = _.options.event;
    function ye() {}
    function me() {
        return this.cancelBubble;
    }
    function we() {
        return this.defaultPrevented;
    }
    _.options.event = function (e) {
        return pt && (e = pt(e)), (e.persist = ye), (e.isPropagationStopped = me), (e.isDefaultPrevented = we), (e.nativeEvent = e);
    };
    var be = {
            enumerable: !1,
            configurable: !0,
            get: function () {
                return this.class;
            },
        },
        gt = _.options.vnode;
    _.options.vnode = function (e) {
        typeof e.type == "string" &&
            (function (t) {
                var n = t.props,
                    i = t.type,
                    o = {};
                for (var s in n) {
                    var r = n[s];
                    if (!((s === "value" && "defaultValue" in n && r == null) || (_e && s === "children" && i === "noscript") || s === "class" || s === "className")) {
                        var a = s.toLowerCase();
                        s === "defaultValue" && "value" in n && n.value == null
                            ? (s = "value")
                            : s === "download" && r === !0
                            ? (r = "")
                            : a === "ondoubleclick"
                            ? (s = "ondblclick")
                            : a !== "onchange" || (i !== "input" && i !== "textarea") || ve(n.type)
                            ? a === "onfocus"
                                ? (s = "onfocusin")
                                : a === "onblur"
                                ? (s = "onfocusout")
                                : ge.test(s)
                                ? (s = a)
                                : i.indexOf("-") === -1 && pe.test(s)
                                ? (s = s.replace(fe, "-$&").toLowerCase())
                                : r === null && (r = void 0)
                            : (a = s = "oninput"),
                            a === "oninput" && o[(s = a)] && (s = "oninputCapture"),
                            (o[s] = r);
                    }
                }
                i == "select" &&
                    o.multiple &&
                    Array.isArray(o.value) &&
                    (o.value = _.toChildArray(n.children).forEach(function (l) {
                        l.props.selected = o.value.indexOf(l.props.value) != -1;
                    })),
                    i == "select" &&
                        o.defaultValue != null &&
                        (o.value = _.toChildArray(n.children).forEach(function (l) {
                            l.props.selected = o.multiple ? o.defaultValue.indexOf(l.props.value) != -1 : o.defaultValue == l.props.value;
                        })),
                    n.class && !n.className ? ((o.class = n.class), Object.defineProperty(o, "className", be)) : ((n.className && !n.class) || (n.class && n.className)) && (o.class = o.className = n.className),
                    (t.props = o);
            })(e),
            (e.$$typeof = he),
            gt && gt(e);
    };
    var ft = _.options.__r;
    _.options.__r = function (e) {
        ft && ft(e), e.__c;
    };
    var _t = _.options.diffed;
    _.options.diffed = function (e) {
        _t && _t(e);
        var t = e.props,
            n = e.__e;
        n != null && e.type === "textarea" && "value" in t && t.value !== n.value && (n.value = t.value == null ? "" : t.value);
    };
    const Se = (e) => (e ? new DOMParser().parseFromString(e, "text/html").documentElement.textContent ?? "" : ""),
        Ce = (e, t) => [...Se(e)].slice(0, -t).join(""),
        Ee = (e, t, n) => {
            const i = e.getBoundingClientRect().height;
            return Math.round((i - n) / t);
        },
        vt = (e, t, n, i, o = !1) => {
            if (e.innerHTML === "...") return;
            Ee(e, t, n) > i && ((e.innerHTML = Ce(e.innerHTML, o ? 4 : 1)), (e.innerHTML += "..."), vt(e, t, n, i, !0));
        },
        Te = (e) => {
            const t = e.parentNode ?? e,
                n = document.createElement("div"),
                i = e.cloneNode(!0);
            (n.style.visibility = "hidden"), (n.style.position = "absolute"), (n.style.top = "0"), (n.style.left = "0"), (n.style.width = "10000vw"), (n.style.whiteSpace = "nowrap"), n.appendChild(i), t.appendChild(n);
            const o = n.getBoundingClientRect().height,
                s = i.getBoundingClientRect().height;
            return i.remove(), n.remove(), { trueFontSize: o, fontMargins: s - o };
        },
        Le = (e, t, n) => {
            e.querySelectorAll(t).forEach((o) => {
                const { trueFontSize: s, fontMargins: r } = Te(o),
                    a = o.getAttribute("data-original-text");
                a && (o.innerHTML = a), vt(o, s, r, n);
            });
        };
    function xe(e, t, n, i) {
        g.useEffect(() => {
            const o = e.current;
            if (!o) return;
            const s = () => {
                Le(o, n, t);
            };
            s(), document.fonts.ready.then(s);
            const r = setTimeout(() => {
                s();
            }, 200);
            return () => {
                clearTimeout(r);
            };
        }, i);
    }
    const ke = (e, t) => {
            let n;
            return function (...i) {
                clearTimeout(n),
                    (n = setTimeout(() => {
                        e(...i);
                    }, t));
            };
        },
        yt = "JOIN_STORY_READ",
        Ie = (e) => `JOIN_STICKY_CLOSED_${e}`,
        z = (e) => {
            const t = window.localStorage.getItem(e);
            try {
                return t ? JSON.parse(t) : void 0;
            } catch {
                return;
            }
        },
        Pe = (e, t) => (n) => (e.enableRead ? t.some(({ id: i, publishedDate: o }) => i === n._id && Number(o) >= Number(n.lastPublishDate)) : !1),
        mt = _.createContext([]);
    function wt(e) {
        const t = g.useContext(mt);
        return Pe(e, t);
    }
    const Ae = (e) => {
            const { top: t } = e.getBoundingClientRect();
            return Math.round(t + window.scrollY);
        },
        Y = {
            card: { defaultMobileHeight: 325, defaultDesktopHeight: 400, defaultMobileSpacing: 6, defaultDesktopSpacing: 8 },
            square: { defaultMobileHeight: 120, defaultDesktopHeight: 150, defaultMobileSpacing: 7, defaultDesktopSpacing: 8 },
            bubble: { defaultMobileHeight: 75, defaultDesktopHeight: 90, defaultMobileSpacing: 8, defaultDesktopSpacing: 10 },
        },
        F = { bubble: 12, card: 30, stickyBubble: 15, stickyCard: 17 },
        bt = "Open Sans_600",
        St = (e) => {
            switch (e) {
                case "card":
                    return { defaultFontFamily: $, defaultFontSize: F.card, defaultColor: "#ffffff", defaultMaxLines: 3 };
                case "sticky-bubble":
                    return { defaultFontFamily: bt, defaultFontSize: F.stickyBubble, defaultColor: "#FFFFFF", defaultMaxLines: 3 };
                case "sticky-card":
                    return { defaultFontFamily: bt, defaultFontSize: F.stickyCard, defaultColor: "#FFFFFF", defaultMaxLines: 4 };
                case "bubble":
                case "square":
                default:
                    return { defaultFontFamily: $, defaultFontSize: F.bubble, defaultColor: "#111111", defaultMaxLines: 2 };
            }
        },
        R = (e) => {
            switch (e) {
                case "card":
                    return { ...Y.card, ratio: 9 / 16, playIconRatio: 0.22 };
                case "square":
                    return { ...Y.square, ratio: 1, playIconRatio: 0.5 };
                case "bubble":
                default:
                    return { ...Y.bubble, ratio: 1, playIconRatio: 0.5 };
            }
        },
        Ct = (e, t) => {
            const { defaultMobileHeight: n, defaultDesktopHeight: i } = R(e.shape);
            return t === "desktop" ? e.height || e.desktopHeight || i : e.height || e.mobileHeight || n;
        },
        Et = (e, t) => {
            const { ratio: n } = R(e.shape);
            return Ct(e, t) * n;
        },
        Z = (e, t) => {
            const { defaultMobileSpacing: n, defaultDesktopSpacing: i } = R(e.shape);
            return t === "desktop" ? e.spacing || e.desktopSpacing || i : e.spacing || e.mobileSpacing || n;
        },
        Oe = (e, t) => {
            const { playIconRatio: n } = R(e.shape);
            return n * Et(e, t);
        },
        Tt = (e) => {
            if (!e) return;
            const t = getComputedStyle(e),
                n = parseFloat(t.getPropertyValue("--join-widget-bubble-desktop-spacing"));
            return isNaN(n) ? void 0 : n;
        },
        Lt = 50,
        Ne = (e) => {
            const { widgetConfig: t, platform: n, onScroll: i } = e,
                o = g.useRef(null),
                [s, r] = g.useState(!1),
                [a, l] = g.useState(!1);
            return (
                g.useEffect(() => {
                    const d = o.current;
                    if (!d) return;
                    const f = Tt(d) ?? Z(t, n),
                        h = (v) => {
                            r(d.scrollLeft > Lt), l(d.scrollLeft + d.clientWidth + Lt + f < d.scrollWidth), v && i?.("natural");
                        };
                    return (
                        d.addEventListener("scroll", h),
                        h(),
                        () => {
                            d.removeEventListener("scroll", h);
                        }
                    );
                }, [t, n]),
                {
                    ref: o,
                    canScrollLeft: s,
                    canScrollRight: a,
                    handleScroll: (d) => () => {
                        const f = Tt(o.current) ?? Z(t, n),
                            h = Et(t, n) + f * 2,
                            v = d === "left" ? -h : h;
                        o.current?.scrollBy({ left: v, behavior: "smooth" }), i?.("button");
                    },
                }
            );
        },
        Re = "inherit";
    function je(e, t) {
        const { defaultFontFamily: n, defaultFontSize: i, defaultColor: o, defaultMaxLines: s } = St(e.shape),
            { shape: r, alignment: a = "center", showLabels: l = !0, labelsStyle: u, borderColors: d = [], labelsLineCount: f = s } = e,
            { fontFamily: h, fontSize: v = i, color: m = o, fontStyle: k = "normal", textDecoration: E = "none", paddingBottom: y = "0" } = u ?? {},
            C = u?.websiteFont ? Re : h ?? n,
            L = 1,
            { ratio: w } = R(r),
            T = t === "desktop",
            I = Ct(e, t),
            p = Z(e, t),
            b = 1,
            P = {
                "--labels-lines-count": f,
                "--labels-font-family": C,
                "--labels-font-size": `${v}px`,
                "--labels-font-style": k,
                "--labels-text-decoration": E,
                "--labels-line-height": `${L}em`,
                "--labels-color": m,
                "--labels-padding-bottom": `${y}em`,
            },
            S = {
                "--labels-font-size": `${v + 2}px`,
                "--widget-height": `var(--join-widget-${r}-desktop-height, ${I}px)`,
                "--widget-width": `${w !== 1 ? `calc(var(--widget-height) * ${w})` : "var(--widget-height)"}`,
                "--widget-spacing": `var(--join-widget-${r}-desktop-spacing, ${p}px)`,
            };
        return {
            "--animated-border-color": r === "bubble" ? d[0] : "",
            "--nth-to-fade": r === "bubble" ? 3 : 5,
            "--align-margin": a === "center" ? "auto" : "-10px",
            "--widget-height": `var(--join-widget-${r}-mobile-height, ${I}px)`,
            "--widget-width": w !== 1 ? `calc(var(--widget-height) * ${w})` : "var(--widget-height)",
            "--widget-spacing": `var(--join-widget-${r}-mobile-spacing, ${p}px)`,
            "--story-icon-ratio": b,
            ...(l ? P : {}),
            ...(T ? S : {}),
        };
    }
    function De(e, t) {
        const n = t.labelsLineCount || St(t.shape).defaultMaxLines;
        xe(e, n, ".join-widget-label-content", [e, t]);
    }
    const xt = (e) => {
            const t = e.querySelector("video");
            if (!t || t.classList.contains("playing")) return;
            const n = t.getAttribute("data-video-src");
            if (!n) return;
            const i = () => {
                t.play(), t.classList.add("playing");
            };
            t.src !== n ? ((t.oncanplay = i), (t.src = `${n}#t=0.001`), t.load()) : i();
        },
        q = (e) => {
            const t = e.querySelector("video");
            t?.src && (t.pause(), (t.currentTime = 0), t.classList.remove("playing"), t.getAttribute("data-thumbnail-error") || (t.removeAttribute("src"), t.load()));
        },
        We = 100,
        Me = (e, t, n, i, o) => {
            const s = g.useRef(!1);
            g.useEffect(() => {
                const r = e.current;
                if (!r || !t || i.stories.length === 0) return;
                const a = () => {
                        const y = n === "mobile",
                            C = r.getBoundingClientRect(),
                            L = r.querySelectorAll(".video-cover-container"),
                            w = y ? 3 : 1;
                        let T = 0;
                        L.forEach((I) => {
                            const p = I.getBoundingClientRect();
                            p.left + p.width * 0.8 < C.right && p.right - p.width * 0.8 > C.left && T < w ? (T++, xt(I)) : q(I);
                        });
                    },
                    l = ke(a, We),
                    u = (y) => {
                        r.querySelectorAll(".video-cover-container").forEach((L) => {
                            const w = L.getAttribute("data-cover-id");
                            L && (y === w ? xt(L) : q(L));
                        });
                    },
                    d = (y) => {
                        const C = y.target.closest(".video-cover-container");
                        u(C?.getAttribute("data-cover-id") || "");
                    },
                    f = () => {
                        a();
                    },
                    h = r.querySelectorAll(".video-cover-container"),
                    v = () => {
                        a(),
                            r.addEventListener("scroll", l, { passive: !0 }),
                            h?.forEach((y) => {
                                y.addEventListener("mouseenter", d), y.addEventListener("mouseleave", f);
                            });
                    },
                    m = () => {
                        r.removeEventListener("scroll", l),
                            h.forEach((y) => {
                                y.removeEventListener("mouseenter", d), y.removeEventListener("mouseleave", f), q(y);
                            });
                    },
                    k = o?.subscribe("open", () => {
                        (s.current = !0), m();
                    }),
                    E = o?.subscribe("close", () => {
                        (s.current = !1), v();
                    });
                return (
                    v(),
                    () => {
                        m(), k?.(), E?.();
                    }
                );
            }, [e, t, n, i]);
        },
        Ve = (e, t) => t.reduce((n, i) => (e >= i ? i : n), 0),
        Fe = (e, t, n) => n.elementFromPoint(e, t),
        Ue = (e = 4, t = 5) => {
            const n = [];
            for (let i = 0; i < e; i++) for (let o = 0; o < t; o++) n.push({ x: 0.1 + (o / (t - 1)) * 0.8, y: 0.15 + (i / (e - 1)) * 0.7 });
            return n;
        },
        He = (e, t, n) => {
            const i = e.top,
                o = Math.max(0, e.left),
                s = e.height,
                r = Math.min(n, e.right - o);
            return t.map((a) => ({ x: o + a.x * r, y: i + a.y * s }));
        },
        Be = (e, t, n) => {
            const i = e.getBoundingClientRect(),
                o = e.getRootNode() || document;
            return He(i, n, t).reduce((s, r) => s + (e.contains(Fe(r.x, r.y, o)) ? 1 : 0), 0);
        },
        kt = Ue(),
        $e = 1500;
    class Je {
        constructor(t, n, i = { threshold: [0] }) {
            (this.node = t),
                (this.callback = n),
                (this.options = i),
                (this.unsubscribe = this.unsubscribe.bind(this)),
                (this.handleVisibilityChange = this.handleVisibilityChange.bind(this)),
                (this.seenThresholds = i.threshold.map((o) => [o, !1])),
                document.addEventListener("scroll", this.handleVisibilityChange, { passive: !0 }),
                (this.intervalId = window.setInterval(this.handleVisibilityChange, $e)),
                this.handleVisibilityChange();
        }
        lastSeenRatio = -1;
        seenThresholds = [];
        intervalId = null;
        unsubscribe() {
            document.removeEventListener("scroll", this.handleVisibilityChange), this.intervalId && (window.clearInterval(this.intervalId), (this.intervalId = null));
        }
        handleVisibilityChange() {
            const t = window.innerWidth || document.documentElement.clientWidth,
                n = this.node.clientWidth > 0 && this.node.clientWidth < t,
                i = Be(this.node, n ? this.node.clientWidth : t, kt),
                o = Ve(i / kt.length, this.options.threshold);
            o > this.lastSeenRatio && ((this.lastSeenRatio = o), (this.seenThresholds = this.seenThresholds.map(([s, r]) => (!r && s <= o ? (this.callback(s), [s, !0]) : [s, r])))),
                this.lastSeenRatio >= this.options.threshold[this.options.threshold.length - 1] && this.unsubscribe();
        }
    }
    const ze = ({ widgetConfig: e, platform: t, onClick: n, forceVisible: i, containerRef: o, feedPlayer: s, analyticsController: r, analyticsControllerV2: a, LayoutComponent: l, ShapeComponent: u, setContainer: d }) => {
            const f = wt(e);
            return c(l, {
                containerRef: o,
                setContainer: d,
                feedPlayer: s,
                analyticsController: r,
                analyticsControllerV2: a,
                forceVisible: i,
                widgetConfig: e,
                platform: t,
                renderItem: (h, v, m) => c(u, { platform: t, read: f(h), story: h, visible: m, widgetConfig: e, index: v, onClick: n }, h._id),
            });
        },
        Ye = (e, t = "bubble") => {
            const n = window.joinStories?.components?.layout?.[e];
            if (!n) return;
            const i = window.joinStories?.components?.shape?.[t];
            if (i) return (o) => c(ze, { ...o, LayoutComponent: n, ShapeComponent: i });
        };
    function Ze(e, t) {
        const n = document.querySelector('script[id="join-feed-script"]');
        if (n) {
            t && n.addEventListener("load", t);
            return;
        }
        const i = document.createElement("script");
        (i.id = "join-feed-script"), i.setAttribute("type", "module"), i.setAttribute("src", e), (i.async = !0), t && i.addEventListener("load", t), document.body.appendChild(i);
    }
    const qe = (e, t) => (t === "bubble" && e === "list" ? 4e3 : 500),
        G = (e) => e.map((t) => t._id).join(","),
        Ge = [0.1, 0.5, 0.75, 1];
    function Qe(e, t, n) {
        const i = g.useMemo(() => G(e.stories), [e.stories]);
        g.useEffect(() => {
            if (!t.current) return;
            const o = new Je(t.current, n, { threshold: Ge });
            return () => {
                o.unsubscribe();
            };
        }, [t, i]);
    }
    const It = 5,
        Pt = (e) => {
            const { offsetWidth: t, scrollLeft: n, scrollWidth: i } = e;
            return { canScrollLeft: n > It, canScrollRight: i - (n + t) > It };
        },
        At = (e, { canScrollLeft: t, canScrollRight: n }) => {
            t ? e.classList.add("canScrollLeft") : e.classList.remove("canScrollLeft"), n ? e.classList.add("canScrollRight") : e.classList.remove("canScrollRight");
        },
        Ke = (e) => (t) => {
            const { canScrollLeft: n, canScrollRight: i } = Pt(e);
            e && !t.deltaX && t.deltaY && ((t.deltaY > 0 && i) || (t.deltaY < 0 && n)) && ((e.scrollLeft += t.deltaY), t.preventDefault()), At(e, { canScrollLeft: n, canScrollRight: i });
        };
    function Xe(e) {
        g.useEffect(() => {
            const t = e.current?.querySelector(".join-widget-list");
            if (!t) return;
            const n = Ke(t),
                i = () => At(t, Pt(t));
            return (
                t.addEventListener("wheel", n, { passive: !0 }),
                t.addEventListener("touchmove", i, { passive: !0 }),
                t.addEventListener("scroll", i, { passive: !0 }),
                i(),
                () => {
                    t?.removeEventListener("wheel", n), t?.removeEventListener("touchmove", i), t?.removeEventListener("scroll", i);
                }
            );
        }, []);
    }
    const tn = `@keyframes fade-in{0%{opacity:0}to{opacity:1}}.join-list{position:relative;z-index:1;max-width:100%}.join-widget-list{scrollbar-width:none;-ms-overflow-style:none;display:flex;flex-direction:row;justify-content:safe var(--alignment);align-items:center;min-height:calc(var(--widget-height) + 16px * 2);margin:-15px var(--align-margin);padding:15px 10px;list-style:none;white-space:normal;overflow:hidden;overflow-x:auto;-webkit-overflow-scrolling:touch;width:fit-content;max-width:100%;box-sizing:border-box;pointer-events:all}.join-widget-list::-webkit-scrollbar{width:0;display:none}.join-widget-list li{display:flex;list-style-type:none}.join-widget-list-fade-in{position:absolute;inset:0;z-index:2;width:101%;pointer-events:none;background:linear-gradient(90deg,transparent 86.84%,rgba(255,255,255,1) 95.1%)}.can-scroll-left{-webkit-mask-image:linear-gradient(to right,transparent 0%,black calc(var(--widget-width) / var(--nth-to-fade)));mask-image:linear-gradient(to right,transparent 0%,black calc(var(--widget-width) / var(--nth-to-fade)));-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-size:100% 100%;mask-size:100% 100%}.can-scroll-right{-webkit-mask-image:linear-gradient(to right,black calc(100% - var(--widget-width) / var(--nth-to-fade)),transparent 100%);mask-image:linear-gradient(to right,black calc(100% - var(--widget-width) / var(--nth-to-fade)),transparent 100%);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-size:100% 100%;mask-size:100% 100%}.can-scroll-left.can-scroll-right{-webkit-mask-image:linear-gradient(to right,transparent 0%,black calc(var(--widget-width) / var(--nth-to-fade)),black calc(100% - var(--widget-width) / var(--nth-to-fade)),transparent 100%);mask-image:linear-gradient(to right,transparent 0%,black calc(var(--widget-width) / var(--nth-to-fade)),black calc(100% - var(--widget-width) / var(--nth-to-fade)),transparent 100%)}.join-widget-element{border:inherit;background:unset;padding:unset;box-sizing:content-box;position:relative;width:var(--widget-width);min-width:var(--widget-width);max-width:var(--widget-width);padding:0 var(--widget-spacing);-webkit-tap-highlight-color:transparent}:not(.visible).join-widget-list:not(.no-animation) .join-widget-element,:not(.visible).join-widget-list:not(.no-animation)~.join-carousel-button{opacity:0}.visible.join-widget-list:not(.no-animation) .join-widget-element,.visible.join-widget-list:not(.no-animation)~.join-carousel-button{animation:fade-in .5s}[data-join-story-url]{cursor:pointer;transition:transform .1s linear}.join-list-title{display:none}.desktop .join-list-title{display:block;margin:12px 0}.play-button{position:absolute;top:calc(50% - 1px);left:50%;transform:translate(-50%,-50%);pointer-events:none;filter:drop-shadow(0 2px 3px rgba(0,0,0,.25));color:#fff}.play-button-minimalist{left:calc(50% + 2px)}.video-cover:not(.playing):not([data-thumbnail-error=true]){opacity:0}.video-cover.playing{opacity:1}
`,
        en = `.join-carousel-button{width:3.6em;height:3.6em;z-index:1;cursor:pointer;pointer-events:all;padding:.4em;border-radius:50%;background:rgba(255,255,255,.3);backdrop-filter:blur(6.5px);box-shadow:0 2px 9px #00000040;display:flex;align-items:center;justify-content:center;position:absolute;top:50%;transform:translateY(-50%);border:none}.join-carousel-button.left{left:.5em;transform:translateY(-50%) rotate(180deg)}.join-carousel-button.right{right:.5em}.visible.join-widget-list:not(.no-animation)~.join-carousel-button{animation:fade-in .5s}
`,
        Ot = ({ direction: e, onScroll: t, className: n = "" }) =>
            c(M, {
                css: en,
                children: c("button", {
                    className: `join-carousel-button ${e} ${n}`,
                    onClick: t,
                    children: c("svg", {
                        width: "24",
                        height: "24",
                        viewBox: "0 0 24 24",
                        fill: "none",
                        xmlns: "http://www.w3.org/2000/svg",
                        children: c("path", { d: "M9.82861 5.23413L16.5366 11.9428L9.82798 18.6508", stroke: "#141414", strokeWidth: "3", strokeLinecap: "round", strokeLinejoin: "round" }),
                    }),
                }),
            }),
        nn = ({ widgetConfig: e, analyticsController: t, analyticsControllerV2: n, platform: i, renderItem: o, noAnimation: s = !1, forceVisible: r = !1, feedPlayer: a }) => {
            const [l, u] = g.useState(r),
                d = wt(e),
                { ref: f, canScrollLeft: h, canScrollRight: v, handleScroll: m } = Ne({
                    widgetConfig: e,
                    platform: i,
                    onScroll: (w) => {
                        n?.sendWidgetScrolledEvent(w);
                    },
                });
            Xe(f),
                Me(f, l, i, e, a),
                Qe(e, f, (w) => {
                    w === 0.1 && u(!0), t?.sendWidgetVisibleBeacon(w);
                    const T = f.current ? Ae(f.current) : 0;
                    n?.sendWidgetVisibilityEvent(w, T);
                }),
                De(f, e);
            const k = e.reorderedReadStories ? [...e.stories].sort((w, T) => (d(w) && !d(T) ? 1 : d(T) && !d(w) ? -1 : 0)) : e.stories,
                E = je(e, i),
                { apparitionAnimation: y, elementAnimation: C } = e,
                L = [l ? "visible" : "", v ? "can-scroll-right" : "", h ? "can-scroll-left" : "", s ? "no-animation" : "", y, C].filter(Boolean).join(" ");
            return c(M, {
                css: tn,
                children: c("div", {
                    className: `join-list ${i}`,
                    style: E,
                    children: [
                        c("style", {
                            children: [y ? window.joinStories?.animations?.[y] : "", C ? window.joinStories?.animations?.[C] : ""].join(`
`),
                        }),
                        i === "desktop" && h && c(Ot, { direction: "left", onScroll: m("left"), className: e.showLabels ? "with-label" : "without-label" }),
                        c("ul", { ref: f, className: `join-widget-list ${L}`, children: k.map((w, T) => o(w, T, l)) }),
                        i === "desktop" && v && c(Ot, { direction: "right", onScroll: m("right"), className: e.showLabels ? "with-label" : "without-label" }),
                    ],
                }),
            });
        },
        on = () => ot("layout", "list", nn);
    function sn(e, t, n) {
        const i = n === "desktop";
        g.useEffect(() => {
            const o = e.current;
            let s = !1;
            const r = () => {
                    o?.classList.add("clicked"), (s = !1), o?.addEventListener("touchmove", a, { once: !0, passive: !0 });
                },
                a = () => {
                    o?.classList.remove("clicked"), (s = !0);
                };
            if (i)
                return (
                    o?.addEventListener("click", t),
                    () => {
                        o?.removeEventListener("click", t);
                    }
                );
            const l = () => {
                o?.addEventListener("mouseup", t), o?.removeEventListener("touchmove", a), s || t();
            };
            return (
                o?.addEventListener("touchstart", r, { passive: !0 }),
                o?.addEventListener("mouseup", l, { passive: !0 }),
                () => {
                    o?.removeEventListener("touchstart", r), o?.removeEventListener("mouseup", l), o?.removeEventListener("mouseup", t), o?.removeEventListener("touchmove", a);
                }
            );
        }, [i, t]);
    }
    const rn = (e) => e.replace("videos.join-stories.com", "images.join-stories.com").replace("optimized/mp4/short-sd", "video-thumbnail").replace("optimized/mp4/short", "video-thumbnail").replace(/.mp4$/, ".jpg"),
        Q = "Story Cover",
        K = "Story Video",
        an = (e) => (e ? `${Q} - ${e}` : Q),
        cn = (e) => (e ? `${K} for ${e}` : K),
        ln = ({ cover: e, alt: t = "Story Cover" }) => c("picture", { children: c("img", { loading: "lazy", className: "cover", src: e.mediaUrl, alt: t, onContextMenu: (n) => n.preventDefault() }) }),
        dn = ({ cover: e }) =>
            c("div", { className: "cover video-cover-container", children: c("video", { style: { ...e.cropCss }, className: "video-cover", muted: !0, playsInline: !0, loop: !0, autoPlay: !0, src: e.mediaUrl, content: e.contentType }) }),
        un = ({ id: e, cover: t, autoPlay: n, alt: i = Q, ariaLabel: o = K }) => {
            const s = g.useRef(null),
                [r, a] = g.useState(!1);
            if (
                (g.useEffect(() => {
                    const u = s.current;
                    r && u && u.load();
                }, [r]),
                n)
            )
                return c(dn, { cover: t });
            const l = rn(t.mediaUrl);
            return c("div", {
                "data-cover-id": e,
                className: "cover video-cover-container",
                children: [
                    !r &&
                        c("img", {
                            src: l,
                            onError: () => {
                                a(!0);
                            },
                            alt: i,
                            className: "video-cover-thumbnail",
                            loading: "lazy",
                            style: { ...t.cropCss },
                            onContextMenu: (u) => u.preventDefault(),
                        }),
                    c("video", {
                        ref: s,
                        "aria-label": o,
                        style: { ...t.cropCss },
                        className: "video-cover",
                        muted: !0,
                        playsInline: !0,
                        loop: !0,
                        "data-video-src": t.mediaUrl,
                        content: t.contentType,
                        ...(r ? { src: t.mediaUrl, "data-thumbnail-error": !0, preload: "metadata" } : {}),
                        onContextMenu: (u) => u.preventDefault(),
                    }),
                ],
            });
        },
        hn = ({ story: e, autoPlay: t }) => {
            const n = e.currentCover,
                i = n.contentType.includes("mp4"),
                o = an(e.containerLabel),
                s = cn(e.containerLabel);
            return i ? c(un, { id: e._id, cover: n, autoPlay: t, alt: o, ariaLabel: s }) : c(ln, { cover: n, alt: o });
        },
        pn = ({ isOpen: e }) =>
            c("svg", {
                className: `story-icon story-icon-first ${e ? "open" : ""}`,
                viewBox: "0 0 145 40",
                fill: "none",
                xmlns: "http://www.w3.org/2000/svg",
                children: [
                    c("rect", { className: "story-icon-bg", width: "145", height: "40", rx: "20", fillOpacity: "0.9" }),
                    c("path", { className: "story-icon-main", d: "M34 12.0002C35.1046 12.0002 36 12.8956 36 14.0002V26.0002C36 27.1048 35.1046 28.0002 34 28.0002V12.0002Z" }),
                    c("path", {
                        className: "story-icon-main",
                        d: "M19 12.0002C19 10.8956 19.8954 10.0002 21 10.0002H30C31.1046 10.0002 32 10.8956 32 12.0002V28.0002C32 29.1048 31.1046 30.0002 30 30.0002H21C19.8954 30.0002 19 29.1048 19 28.0002V12.0002Z",
                    }),
                    c("path", { className: "story-icon-main", d: "M38 14.0002C38.8284 14.0002 39.5 14.6718 39.5 15.5002V24.5002C39.5 25.3286 38.8284 26.0002 38 26.0002V14.0002Z" }),
                    c("path", {
                        className: "story-icon-text",
                        d:
                            "M62.028 15.228L59.298 25H56.988L55.154 18.042L53.236 25L50.94 25.014L48.308 15.228H50.408L52.13 22.816L54.118 15.228H56.302L58.178 22.774L59.914 15.228H62.028ZM65.2678 16.81V19.26H68.5578V20.814H65.2678V23.404H68.9778V25H63.3078V15.214H68.9778V16.81H65.2678ZM76.303 19.988C76.8536 20.0907 77.3063 20.366 77.661 20.814C78.0156 21.262 78.193 21.7753 78.193 22.354C78.193 22.8767 78.0623 23.3387 77.801 23.74C77.549 24.132 77.1803 24.44 76.695 24.664C76.2096 24.888 75.6356 25 74.973 25H70.759V15.228H74.791C75.4536 15.228 76.023 15.3353 76.499 15.55C76.9843 15.7647 77.3483 16.0633 77.591 16.446C77.843 16.8287 77.969 17.2627 77.969 17.748C77.969 18.3173 77.815 18.7933 77.507 19.176C77.2083 19.5587 76.807 19.8293 76.303 19.988ZM72.719 19.26H74.511C74.9776 19.26 75.337 19.1573 75.589 18.952C75.841 18.7373 75.967 18.434 75.967 18.042C75.967 17.65 75.841 17.3467 75.589 17.132C75.337 16.9173 74.9776 16.81 74.511 16.81H72.719V19.26ZM74.693 23.404C75.169 23.404 75.5376 23.292 75.799 23.068C76.0696 22.844 76.205 22.5267 76.205 22.116C76.205 21.696 76.065 21.3693 75.785 21.136C75.505 20.8933 75.127 20.772 74.651 20.772H72.719V23.404H74.693ZM86.465 25.098C85.7837 25.098 85.1677 24.9813 84.617 24.748C84.0757 24.5147 83.6463 24.1787 83.329 23.74C83.0117 23.3013 82.8483 22.7833 82.839 22.186H84.939C84.967 22.5873 85.107 22.9047 85.359 23.138C85.6203 23.3713 85.975 23.488 86.423 23.488C86.8803 23.488 87.2397 23.3807 87.501 23.166C87.7623 22.942 87.893 22.6527 87.893 22.298C87.893 22.0087 87.8043 21.7707 87.627 21.584C87.4497 21.3973 87.2257 21.2527 86.955 21.15C86.6937 21.038 86.3297 20.9167 85.863 20.786C85.2283 20.5993 84.7103 20.4173 84.309 20.24C83.917 20.0533 83.5763 19.778 83.287 19.414C83.007 19.0407 82.867 18.546 82.867 17.93C82.867 17.3513 83.0117 16.8473 83.301 16.418C83.5903 15.9887 83.9963 15.662 84.519 15.438C85.0417 15.2047 85.639 15.088 86.311 15.088C87.319 15.088 88.1357 15.3353 88.761 15.83C89.3957 16.3153 89.7457 16.9967 89.811 17.874H87.655C87.6363 17.538 87.4917 17.2627 87.221 17.048C86.9597 16.824 86.6097 16.712 86.171 16.712C85.7883 16.712 85.4803 16.81 85.247 17.006C85.023 17.202 84.911 17.4867 84.911 17.86C84.911 18.1213 84.995 18.3407 85.163 18.518C85.3403 18.686 85.555 18.826 85.807 18.938C86.0683 19.0407 86.4323 19.162 86.899 19.302C87.5337 19.4887 88.0517 19.6753 88.453 19.862C88.8543 20.0487 89.1997 20.3287 89.489 20.702C89.7783 21.0753 89.923 21.5653 89.923 22.172C89.923 22.6947 89.7877 23.18 89.517 23.628C89.2463 24.076 88.8497 24.4353 88.327 24.706C87.8043 24.9673 87.1837 25.098 86.465 25.098ZM98.2723 15.228V16.81H95.6683V25H93.7083V16.81H91.1043V15.228H98.2723ZM104.238 25.098C103.324 25.098 102.484 24.8833 101.718 24.454C100.953 24.0247 100.346 23.432 99.8983 22.676C99.4503 21.9107 99.2263 21.0473 99.2263 20.086C99.2263 19.134 99.4503 18.28 99.8983 17.524C100.346 16.7587 100.953 16.1613 101.718 15.732C102.484 15.3027 103.324 15.088 104.238 15.088C105.162 15.088 106.002 15.3027 106.758 15.732C107.524 16.1613 108.126 16.7587 108.564 17.524C109.012 18.28 109.236 19.134 109.236 20.086C109.236 21.0473 109.012 21.9107 108.564 22.676C108.126 23.432 107.524 24.0247 106.758 24.454C105.993 24.8833 105.153 25.098 104.238 25.098ZM104.238 23.348C104.826 23.348 105.344 23.2173 105.792 22.956C106.24 22.6853 106.59 22.3027 106.842 21.808C107.094 21.3133 107.22 20.7393 107.22 20.086C107.22 19.4327 107.094 18.8633 106.842 18.378C106.59 17.8833 106.24 17.5053 105.792 17.244C105.344 16.9827 104.826 16.852 104.238 16.852C103.65 16.852 103.128 16.9827 102.67 17.244C102.222 17.5053 101.872 17.8833 101.62 18.378C101.368 18.8633 101.242 19.4327 101.242 20.086C101.242 20.7393 101.368 21.3133 101.62 21.808C101.872 22.3027 102.222 22.6853 102.67 22.956C103.128 23.2173 103.65 23.348 104.238 23.348ZM115.735 25L113.579 21.192H112.655V25H110.695V15.228H114.363C115.119 15.228 115.763 15.3633 116.295 15.634C116.827 15.8953 117.223 16.2547 117.485 16.712C117.755 17.16 117.891 17.664 117.891 18.224C117.891 18.868 117.704 19.4513 117.331 19.974C116.957 20.4873 116.402 20.842 115.665 21.038L118.003 25H115.735ZM112.655 19.722H114.293C114.825 19.722 115.221 19.596 115.483 19.344C115.744 19.0827 115.875 18.7233 115.875 18.266C115.875 17.818 115.744 17.4727 115.483 17.23C115.221 16.978 114.825 16.852 114.293 16.852H112.655V19.722ZM127.433 15.228L124.129 21.598V25H122.169V21.598L118.851 15.228H121.063L123.163 19.694L125.249 15.228H127.433Z",
                    }),
                ],
            }),
        gn = `.story-icon{position:absolute;top:.6em;left:.6em;height:calc(30px * var(--story-icon-ratio, 1));pointer-events:none}.story-icon-bg{fill:#fff}.story-icon-main,.story-icon-text{fill:#000}.story-icon-first *{transition:width .3s ease-in-out,transform .3s .05s ease-in-out,opacity .2s .15s ease-in-out}.story-icon-first:not(.open) *{transition:width .4s .1s ease-in-out,transform .4s .05s ease-in-out,opacity .2s ease-in-out}.story-icon-first:not(.open) rect{width:40px}.story-icon-first:not(.open) .story-icon-text{opacity:0}.story-icon-first:not(.open) .story-icon-main{transform:translate(-8px)}
`,
        fn = () =>
            c("svg", {
                className: "story-icon",
                viewBox: "0 0 24 24",
                fill: "none",
                xmlns: "http://www.w3.org/2000/svg",
                children: [
                    c("circle", { className: "story-icon-bg", cx: "12", cy: "12", r: "12" }),
                    c("path", { className: "story-icon-main", d: "M15.6001 7.20006C16.2628 7.20006 16.8001 7.73732 16.8001 8.40006V15.6001C16.8001 16.2628 16.2628 16.8001 15.6001 16.8001V7.20006Z" }),
                    c("path", {
                        className: "story-icon-main",
                        d:
                            "M6.6001 7.20006C6.6001 6.53732 7.13736 6.00006 7.8001 6.00006H13.2001C13.8628 6.00006 14.4001 6.53732 14.4001 7.20006V16.8001C14.4001 17.4628 13.8628 18.0001 13.2001 18.0001H7.8001C7.13736 18.0001 6.6001 17.4628 6.6001 16.8001V7.20006Z",
                    }),
                    c("path", { className: "story-icon-main", d: "M18.0001 8.40006C18.4972 8.40006 18.9001 8.803 18.9001 9.30006V14.7001C18.9001 15.1971 18.4972 15.6001 18.0001 15.6001V8.40006Z" }),
                ],
            }),
        _n = ({ isFirst: e, visible: t }) => {
            const [n, i] = g.useState(!1);
            return (
                g.useEffect(() => {
                    if (!t) return;
                    let o;
                    const s = setTimeout(() => {
                        i(!0),
                            (o = setTimeout(() => {
                                i(!1);
                            }, 5e3));
                    }, 1e3);
                    return () => {
                        clearTimeout(s), clearTimeout(o);
                    };
                }, [t]),
                c(M, { css: gn, children: e ? c(pn, { isOpen: n }) : c(fn, {}) })
            );
        },
        Nt = (e) => (e ? new DOMParser().parseFromString(e, "text/html").documentElement.textContent ?? "" : ""),
        vn = ({ story: e }) => c("div", { className: "join-widget-element-label", children: c("span", { className: "join-widget-label-content", "data-original-text": Nt(e.containerLabel), children: Nt(e.containerLabel) }) }),
        Rt = "Play Story",
        yn = (e) => (e ? `${Rt} for ${e}` : Rt),
        mn = () =>
            c("svg", {
                className: "card-play-button-icon-hover",
                viewBox: "0 0 33 32",
                fill: "none",
                xmlns: "http://www.w3.org/2000/svg",
                children: [
                    c("path", { d: "M8.4165 17.4365V23.9655L15.0557 23.9655", stroke: "#141414", strokeWidth: "3", strokeLinecap: "round", strokeLinejoin: "round" }),
                    c("path", { d: "M24.3081 14.5635L24.3081 8.03446L17.6689 8.03453", stroke: "#141414", strokeWidth: "3", strokeLinecap: "round", strokeLinejoin: "round" }),
                ],
            }),
        wn = () =>
            c("svg", {
                className: "card-play-button-icon-default",
                viewBox: "0 0 33 32",
                fill: "none",
                xmlns: "http://www.w3.org/2000/svg",
                children: [
                    c("g", {
                        filter: "url(#filter0_b_16300_44334)",
                        children: c("path", {
                            d: "M23.6847 14.3826C24.7824 15.1813 24.7824 16.8183 23.6847 17.617L14.7669 24.1058C13.445 25.0676 11.5901 24.1234 11.5901 22.4886L11.5901 9.51096C11.5901 7.87617 13.445 6.93192 14.7669 7.89376L23.6847 14.3826Z",
                            fill: "#141414",
                        }),
                    }),
                    c("defs", {
                        children: c("filter", {
                            id: "filter0_b_16300_44334",
                            x: "7.59033",
                            y: "3.50781",
                            width: "20.9175",
                            height: "24.9844",
                            filterUnits: "userSpaceOnUse",
                            "color-interpolation-filters": "sRGB",
                            children: [
                                c("feFlood", { "flood-opacity": "0", result: "BackgroundImageFix" }),
                                c("feGaussianBlur", { in: "BackgroundImageFix", stdDeviation: "2" }),
                                c("feComposite", { in2: "SourceAlpha", operator: "in", result: "effect1_backgroundBlur_16300_44334" }),
                                c("feBlend", { mode: "normal", in: "SourceGraphic", in2: "effect1_backgroundBlur_16300_44334", result: "shape" }),
                            ],
                        }),
                    }),
                ],
            }),
        bn = ({ width: e, height: t }) =>
            c("div", { className: "card-play-button", children: c("div", { className: "card-play-button-icon", style: { "--join-card-icon-width": `${e}px`, "--join-card-icon-height": `${t}px` }, children: [c(wn, {}), c(mn, {})] }) }),
        Sn = `.join-card-container.clicked{transform:scale(.98)}.cover{height:100%;width:100%;object-fit:cover;object-position:center;touch-action:pan-x pan-y;-webkit-touch-callout:none}.video-cover,.video-cover-thumbnail{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;touch-action:pan-x pan-y;-webkit-touch-callout:none}@keyframes card-loading{0%{filter:brightness(1)}50%{filter:brightness(.8)}to{filter:brightness(1)}}.loading .cover{animation:card-loading 1.5s infinite}.card-play-button{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);pointer-events:none}.card-play-button-icon{display:flex;align-items:center;justify-content:center;border-radius:50%;background:rgba(255,255,255,.7);box-shadow:0 4px 4px #00000040;transition:transform .1s linear;width:var(--join-card-icon-width, 33px);height:var(--join-card-icon-height, 32px)}.card-play-button-icon svg{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;width:calc(var(--join-card-icon-width, 33px) * .6);height:calc(var(--join-card-icon-height, 32px) * .6)}.card-play-button-icon-default{opacity:1;transition:opacity .1s linear}.join-card-container:hover .card-play-button-icon-default{opacity:0;transition:opacity 0s linear}.card-play-button-icon-hover{opacity:0;transform:translate(-50%,-50%) scale(.5)!important;transition:opacity 0s linear,transform 0s linear}.join-card-container:hover .card-play-button-icon-hover{opacity:1;transform:translate(-50%,-50%) scale(1)!important;transition:opacity .1s linear,transform .1s linear}.join-widget-list li{position:relative}.overlay{position:absolute;inset:0;background:linear-gradient(to top,rgba(0,0,0,.8) 0%,transparent 45%);pointer-events:none}.join-widget-element-label{position:absolute;bottom:8px;left:0;right:0;padding-bottom:4px;font-family:var(--labels-font-family);font-size:var(--labels-font-size);font-style:var(--labels-font-style);text-decoration:var(--labels-text-decoration);margin:0 8px;color:var(--labels-color);-webkit-user-select:none;user-select:none;max-width:100%;line-break:auto;word-break:break-word;pointer-events:none;line-height:var(--line-height)}.join-card-container{border:inherit;background:unset;padding:unset;position:relative;width:100%;border-radius:8%/4.5%;box-shadow:0 3px 6px #00000014,0 3px 6px #0000001f;overflow:hidden;padding-top:calc(100% * 16 / 9);margin:var(--widget-spacing) 0;transform:scale(1) translateZ(0)}.desktop .join-card-container{transition:transform .1s linear}.desktop .join-card-container:hover{transform:scale(1.02) translateZ(0)}.join-card-container>div{position:absolute;top:0;left:0;height:100%;width:100%}
`,
        Cn = ({ story: e, visible: t, widgetConfig: n, onClick: i, index: o, platform: s }) => {
            const r = g.useRef(null),
                a = o === 0,
                l = !1,
                { showStoryIcon: u = !1, showPlayButton: d = !0, showLabels: f = !0 } = n,
                h = f && !l,
                v = Oe(n, s),
                m = yn(e.containerLabel);
            return (
                sn(
                    r,
                    () => {
                        i(e, r.current);
                    },
                    s
                ),
                c("li", {
                    ref: r,
                    className: "join-widget-element join-card-shape",
                    "data-story-id": e._id,
                    children: c(M, {
                        css: Sn,
                        children: c("button", {
                            type: "button",
                            className: "join-card-container",
                            "data-join-story-url": e.videoUrl,
                            tabIndex: 0,
                            "aria-label": m,
                            children: c("div", { children: [c(hn, { story: e }), h && c("div", { className: "overlay" }), u && c(_n, { isFirst: a, visible: t }), d && c(bn, { width: v, height: v }), h && c(vn, { story: e })] }),
                        }),
                    }),
                })
            );
        },
        En = () => ot("shape", "card", Cn),
        Tn = (e, t) => Math.min(1, (e - t.timing.start) / (t.timing.end - t.timing.start)),
        jt = () => {
            const e = new Date().getTime();
            return `${Math.random().toString(36).substring(2, 6)}-${e}-${Math.random().toString(36).substring(2, 6)}`;
        },
        Dt = (e, t) => (t?.encoding === "base64" ? btoa(JSON.stringify(e)) : encodeURIComponent(JSON.stringify(e))),
        Wt = (e, t) => (t?.encoding === "base64" ? Vt(e) : decodeURIComponent(e)),
        X = (e, t) => {
            const n = document.cookie.split(";");
            for (let i of n)
                if (((i = i.trim()), i.startsWith(`${e}=`))) {
                    const o = i.substring(`${e}=`.length),
                        s = Wt(o, { encoding: "base64" });
                    return t?.raw ? s : JSON.parse(s);
                }
            return null;
        },
        tt = (e, t, n) => {
            const i = new Date();
            i.setTime(i.getTime() + 31536e6);
            const o = i.toUTCString(),
                s = Dt(t, { encoding: "base64" }),
                r = `${e}=${s}; expires=${o}; Secure; SameSite=Lax; path=/`;
            return (document.cookie = r), document.cookie.indexOf(`${e}=`) !== -1 ? r : null;
        },
        Ln = (e) => {
            const t = new Date();
            t.setTime(t.getTime() + 1e3);
            const n = t.toUTCString();
            document.cookie = `${e}=; expires=${n}; path=/`;
        };
    function Mt(e) {
        try {
            return decodeURIComponent(e);
        } catch {
            return e;
        }
    }
    function Vt(e) {
        try {
            return atob(e);
        } catch {
            return Mt(e);
        }
    }
    function xn() {
        try {
            const e = "cookietestjoin";
            document.cookie = `${e}=1`;
            const t = document.cookie.indexOf(`${e}=`) !== -1;
            return (document.cookie = `${e}=1; expires=Thu, 01-Jan-1970 00:00:01 GMT`), t;
        } catch {
            return !1;
        }
    }
    function kn(e) {
        return /^[A-Za-z0-9+/]+[=]{0,2}$/.test(e);
    }
    function In(e) {
        return /^[0-9A-Fa-f]+$/.test(e) && e.length % 2 === 0;
    }
    function Pn(e) {
        try {
            return (
                e
                    .match(/.{1,2}/g)
                    ?.map((t) => String.fromCharCode(parseInt(t, 16)))
                    .join("") || e
            );
        } catch {
            return e;
        }
    }
    function An(e) {
        return In(e) ? Pn(e) : kn(e) ? Vt(e) : Mt(e);
    }
    function On(e, t, n) {
        const i = An(t);
        switch (n) {
            case "includes":
                return i.includes(e);
            case "equals":
                return i === e;
            case "regular_expression":
                try {
                    return new RegExp(e).test(i);
                } catch (o) {
                    return console.error("Invalid regular expression:", o), !1;
                }
            default:
                return console.error("Unsupported operator:", n), !1;
        }
    }
    var x = ((e) => ((e.optin = "optin"), (e.optout = "optout"), (e.unknown = "unknown"), (e.blockedByClient = "blocked-by-client"), e))(x || {});
    const Nn = 1e3 * 10,
        U = "_join_stories",
        Rn = (function () {
            let e = null;
            if (typeof window > "u") return { init: () => {}, getUserConsentState: () => ({ uid: null, consent: { analytics: x.unknown } }), setUserConsent: () => {} };
            function t(s, r, a, l) {
                let u = r,
                    d = a,
                    f = null,
                    h = l;
                function v(p) {
                    u = p;
                }
                function m(p) {
                    d = p;
                }
                function k() {
                    try {
                        if (s?.method === "cookie" && s?.cookieName && s?.cookieValue && s.operator) {
                            const p = X(s.cookieName, { raw: !0 });
                            if (!(!p || p === "null" || p === "undefined" || p.trim() === "") && p) return On(s.cookieValue, p, s.operator) ? x.optin : x.optout;
                        }
                    } catch (p) {
                        console.warn("JOIN: Error while checking CMP consent", p);
                    }
                    return x.unknown;
                }
                function E() {
                    return h ? x.blockedByClient : s?.method === "default" ? x.optin : s?.method === "cookie" ? k() : s?.method === "function" ? d : x.unknown;
                }
                function y(p) {
                    let b = null;
                    const P = Date.now();
                    return p === x.optin ? ((b = n()?.uid ?? jt()), tt(U, { uid: b, timestamp: P, consent: { analytics: x.optin }, config: s }) || ((b = null), (h = !0), (d = x.blockedByClient))) : n() && Ln(U), b;
                }
                function C() {
                    const p = n();
                    p && ((u = p.uid), (d = p.consent?.analytics));
                }
                function L(p, b) {
                    if (!p || !p.consent) return !1;
                    const P = p.consent.analytics === b;
                    return b === x.optin ? typeof p.uid == "string" && p.uid.trim() !== "" && P : !p.uid && P;
                }
                function w() {
                    C();
                }
                function T() {
                    let p = u,
                        b = d;
                    if (!f || Date.now() - f > Nn) {
                        b = E();
                        const S = n();
                        L(S, b) ? (p = S?.uid || null) : (p = y(b)), u !== p && v(p), d !== b && m(b), (f = Date.now());
                    }
                    return { uid: p, consent: { analytics: b } };
                }
                function I(p) {
                    const b = p ? x.optin : x.optout;
                    b !== d && (m(b), y(b), (f = null));
                }
                return { init: w, getUserConsentState: T, setUserConsent: I };
            }
            function n() {
                try {
                    return X(U, { encoding: "base64" });
                } catch {
                    return null;
                }
            }
            function i(s) {
                const r = n();
                tt(U, { ...r, config: s });
            }
            function o() {
                if (!e) {
                    const s = n(),
                        r = s?.uid || null,
                        a = s?.consent?.analytics || x.unknown,
                        l = window.joinStories?.consentConfig || s?.config,
                        u = !xn();
                    try {
                        JSON.stringify(l) !== JSON.stringify(s?.config) && i(l);
                    } catch {}
                    (e = t(l, r, a, u)), e.init();
                }
                return e;
            }
            return typeof window < "u" && ((window.joinStories = window.joinStories || {}), (window.joinStories.consentManager = o())), o();
        })(),
        jn = (e) => (e.type ? `web-${e.type}` : null),
        Ft = () => (window.joinStories || (window.joinStories = {}), window.joinStories.ept || (window.joinStories.ept = jt()), window.joinStories.ept),
        Dn = () => {
            const e = window.joinStories?.ept;
            return e || Ft();
        },
        Wn = () => Mn(),
        Mn = () => (typeof window < "u" && window.Shopify ? window.Shopify?.designMode ?? !1 : !1),
        Vn = (e) => e && typeof e == "object" && ("mobile" in e || "desktop" in e),
        Fn = (e, t) => (Vn(e) ? e[t] : e),
        H = (e, t) => {
            const n = (i) => {
                const o = Fn(i, t);
                return typeof o == "object" && o !== null ? H(o, t) : o;
            };
            return Array.isArray(e) ? e.map(n) : Object.fromEntries(Object.entries(e).map(([i, o]) => [i, n(o)]));
        },
        Un = (e, t) => Object.fromEntries(Object.entries(e).filter(([n, i]) => !t(i, n))),
        Hn = (e) => `${e._id}-${e.lastPublishDate}`,
        Bn = (e) => {
            if (!e.keepClosed) return !1;
            const t = z(Ie(e.alias));
            return t ? !!t.lastPublishDate && !!e.lastPublishDate && t.lastPublishDate >= e.lastPublishDate && e.stories[0] && t.stories.includes(Hn(e.stories[0])) : !1;
        },
        Ut = (e) => e / 1e3,
        Ht = (e) => Math.round(e * 1e3),
        $n = () => ({ event_date_creation: Ut(Date.now()), event_date_timezone: new Date().getTimezoneOffset() }),
        Jn = () => {
            const e = window.joinStories?.consentManager?.getUserConsentState();
            return { event_user_id: e?.uid || null, event_user_consent: e?.consent.analytics || null, event_user_consent_tcf: null };
        },
        zn = () => ({ event_page_tag: Dn() }),
        Yn = () => (window.location.pathname === "/" || window.location.pathname.includes("home") ? "home" : "other"),
        Zn = () => {
            const e = window.location.protocol + "//" + window.location.hostname + window.location.pathname;
            return {
                event_integration_environment: "web",
                event_integration_location_name: e,
                event_integration_web_base_url: e,
                event_integration_web_url: window.location.href,
                event_integration_web_protocol: window.location.protocol,
                event_integration_web_domain: window.location.hostname,
                event_integration_web_path: window.location.pathname,
                event_integration_web_parameters: window.location.search,
                event_integration_web_anchor: window.location.hash,
                event_integration_web_referrer: document.referrer,
                event_integration_web_browser_language: window.navigator.language,
                event_integration_web_browser_viewport_width: window.innerWidth,
                event_integration_web_browser_viewport_height: window.innerHeight,
                event_integration_page_type: Yn(),
            };
        },
        qn = () =>
            window.navigator.connection?.effectiveType && window.navigator.connection?.type
                ? [window.navigator.connection.effectiveType, window.navigator.connection.type].join("-")
                : window.navigator.connection?.effectiveType
                ? window.navigator.connection.effectiveType
                : window.navigator.connection?.type
                ? window.navigator.connection.type
                : "unknown";
    let Bt = null;
    (typeof window < "u" && window.navigator.getBattery ? window.navigator.getBattery() : Promise.resolve(null)).then((e) => {
        Bt = e;
    });
    const Gn = () => ({
            event_device_user_agent: window.navigator.userAgent,
            event_device_screen_width: window.screen.width,
            event_device_screen_height: window.screen.height,
            event_device_screen_color: window.screen.colorDepth,
            event_device_screen_ratio: window.screen.width / window.screen.height,
            event_device_pixel_ratio: window.devicePixelRatio,
            event_device_network_type: qn(),
            event_device_orientation: window.screen.orientation?.type?.split("-")[0] || "unknown",
            event_device_battery_level: Bt?.level || null,
        }),
        j = (e, t, n, i) => ({ event_owner: t, event_type: e, event_category: n, event_version: "2", ...i, ...Zn(), ...$n(), ...Jn(), ...zn(), ...Gn() }),
        Qn = (e, t) => {
            const n = e.interactions.find((o) => o.id === t);
            if (!n) throw new Error(`Interaction with id ${t} not found`);
            return { story_chapter_index: e.chapters.findIndex((o) => o.timing.start <= n.timing.start && o.timing.end >= n.timing.end), interaction_type: n.type, interaction_sub_type: null, interaction_variant: null };
        },
        Kn = (e, t, n, i) => ({ ...j(e, t, "interaction", i), ...n }),
        Xn = (e) => e.type === "shopping",
        ti = (e, t, n, i) => {
            const o = e.interactions.find((u) => u.id === t);
            if (!o || !Xn(o)) throw new Error(`Interaction with id ${t} not found`);
            const s = o.data.products.find((u) => u.id === n);
            if (!s) throw new Error(`Product with id ${n} not found`);
            const a = s.variants?.find((u) => u._id === i) ?? s,
                l = a.salePrice ?? a.price;
            return {
                interaction_type: o.type,
                interaction_sub_type: null,
                interaction_variant: null,
                product_base_price: parseFloat(a.price.value),
                product_price: parseFloat(l.value),
                product_final_price: parseFloat(l.value),
                currency: l.currency,
            };
        },
        ei = (e, t, n, i) => ({ ...j(e, t, "product", i), ...n }),
        ni = "story-chapter-view",
        ii = "story-first-chapter-view",
        oi = "story-last-chapter-view",
        $t = "story-view",
        si = [$t],
        ri = [$t, ni, ii, oi],
        ai = (e) => !si.includes(e),
        ci = (e) => !ri.includes(e),
        D = (e, t) => {
            const n = e.stories.findIndex((i) => i._id === t._id);
            return {
                story_id: t._id,
                story_title: t.title,
                story_last_published_date: t.lastPublishDate ? Ut(t.lastPublishDate) : null,
                story_label: t.containerLabel,
                story_sub_label: null,
                story_version: t.version,
                story_has_interactions: t.interactions.length > 0,
                story_has_sound: t.hasSound ?? !1,
                story_chapter_count: t.chapters.length,
                story_is_active: !0,
                story_interaction_count: t.interactions.length,
                story_index_in_widget: n,
                story_duration: Ht(t.chapters[t.chapters.length - 1].timing.end),
                story_has_subtitles: t.hasSubtitles ?? !1,
            };
        },
        li = (e, t) =>
            e.chapters[t]
                ? { story_chapter_index: t, story_chapter_is_active: !0, story_chapter_duration: Ht(e.chapters[t].timing.end - e.chapters[t].timing.start) }
                : { story_chapter_index: t, story_chapter_is_active: !1, story_chapter_duration: 0 },
        di = (e, t, n, i) => ({ ...j(e, t, "story", i), ...n }),
        ui = (e) => {
            switch (e) {
                case "solo-sticky":
                    return "solo-sticky";
                case "standalone":
                case "link":
                    return "none";
                default:
                    return "list";
            }
        },
        B = (e, t) => ({
            widget_id: e._id,
            widget_type: e.type,
            widget_alias: e.alias,
            widget_shape: e.shape,
            widget_layout: ui(e.type),
            widget_version: e.version,
            widget_story_count: e.stories.length,
            widget_variant: null,
            widget_integration_type: "web",
            widget_audience_slots_matched: t,
        }),
        Jt = (e, t, n, i) => ({ ...j(e, t, "widget", i), ...n }),
        zt = "_join_stories_tc",
        Yt = "__join_stories_tc_storage",
        hi = 6e4,
        pi = (e, t) => {
            try {
                gi();
                const n = Date.now(),
                    i = window.localStorage?.getItem(Yt),
                    o = i ? JSON.parse(Wt(i, { encoding: "base64" })) : void 0;
                if (o?.lastCheck && n - o?.lastCheck < hi) return;
                const s = j("", t, "external"),
                    { event_type: r, event_date_creation: a, ...l } = s;
                window.localStorage?.setItem(Yt, Dt({ analyticsUrlV2: e, data: l, lastCheck: n }, { encoding: "base64" }));
            } catch (n) {
                console.warn("JOIN: Error while setting technical payload", n);
            }
        },
        gi = () => {
            const e = X(zt, { encoding: "base64" });
            e && e.partPayload && tt(zt, { consent: { technical: !0, expiration: 365 } });
        };
    class fi {
        audienceSlotMatch;
        customUserInfo;
        enabled = !0;
        clickCount = 0;
        displayedTimestamp = null;
        documentIsScrolled = !1;
        isScrolled = !1;
        platform;
        widgetConfig;
        callback;
        feedVisible = !1;
        activeStoryId = null;
        storyViewingTime = null;
        storyChapterViewingTime = null;
        currentChapterIndex = 0;
        previousChapterIndex = null;
        pausedAt = null;
        isMuted = !0;
        storyExitReason = null;
        storyPlatform;
        interactionViewingTime = null;
        interactionEngagingTime = null;
        interactionHasBeenBlocking = !1;
        storyEngageCount = 0;
        owner;
        alias;
        videoControllerMap = {};
        constructor(t) {
            (this.widgetConfig = t.widgetConfig),
                (this.platform = t.platform),
                (this.owner = this.widgetConfig.owner),
                (this.alias = this.widgetConfig.alias),
                (this.storyPlatform = this.platform),
                (this.callback = t.callback),
                (this.customUserInfo = t.customUserInfo),
                (this.audienceSlotMatch = t.audienceSlotMatch || []),
                (this.enabled = t.enabled ?? !0),
                Rn.init(),
                Ft(),
                this.sendWidgetInitializedEvent(),
                this.bindAllMethods(),
                document.addEventListener("scroll", this.setDocumentScrolled, { once: !0, passive: !0 });
        }
        setCustomUserInfo(t) {
            this.customUserInfo = t;
        }
        setDisplayTimestamp(t) {
            this.displayedTimestamp = t;
        }
        setEnabled(t) {
            this.enabled = t;
        }
        setWidgetConfig(t) {
            this.widgetConfig = t;
        }
        setPlatform(t) {
            this.platform = t;
        }
        setStoryPlatform(t) {
            this.storyPlatform = t;
        }
        setVideoController(t, n) {
            this.videoControllerMap[t] = n;
        }
        setAudienceSlotMatch(t) {
            this.audienceSlotMatch = t;
        }
        setActiveStory(t) {
            (this.storyViewingTime = Date.now()), (this.activeStoryId = t);
        }
        setFeedVisible(t) {
            this.feedVisible = t;
        }
        setMuted(t) {
            this.isMuted = t;
        }
        setOpenedChapter(t, n) {
            if (((this.storyChapterViewingTime = Date.now()), !n)) {
                this.currentChapterIndex = this.videoControllerMap[t]?.currentChapterIndex;
                return;
            }
            this.currentChapterIndex = n;
        }
        setDocumentScrolled() {
            this.documentIsScrolled = !0;
        }
        setInteractionBlocked() {
            this.interactionHasBeenBlocking = !0;
        }
        setExitReason(t) {
            this.storyExitReason = t;
        }
        sendWidgetEvent(t, n) {
            const o = { ...B(this.getPlatformWidgetConfig(), this.audienceSlotMatch), ...n },
                s = Jt(t, this.owner, o, this.customUserInfo);
            this.sendEvent(s);
        }
        sendWidgetCloseEvent(t) {
            this.sendWidgetEvent("widget-close", { widget_close_reason: t, widget_click_count: this.clickCount });
        }
        sendWidgetInitializedEvent() {
            const t = { widget_alias: this.alias, widget_integration_type: "web" },
                n = Jt("widget-initialized", this.owner, t, this.customUserInfo);
            this.sendEvent(n);
        }
        sendWidgetDisplayedEvent(t) {
            const n = this.getPlatformWidgetConfig();
            (n.type === "solo-sticky" && n.keepClosed && Bn(n)) ||
                ((this.displayedTimestamp = Date.now()), this.sendWidgetEvent("widget-displayed", { widget_integration_relative_position: t / window.innerHeight, widget_integration_position: t }));
        }
        sendWidgetVisibilityEvent(t, n) {
            if (![0.5, 0.75, 1].includes(t)) return;
            if (this.displayedTimestamp === null) {
                console.error("Displayed timestamp is not set");
                return;
            }
            const o = `widget-view-${t * 100}`;
            this.sendWidgetEvent(o, {
                widget_duration_displayed: Date.now() - this.displayedTimestamp,
                widget_integration_relative_position: n / window.innerHeight,
                widget_integration_position: n,
                widget_page_scroll_occurred: this.documentIsScrolled,
            });
        }
        sendWidgetClickEvent(t) {
            this.clickCount += 1;
            const i = { ...D(this.getPlatformWidgetConfig(), t), widget_click_count: this.clickCount, story_chapter_index: this.currentChapterIndex };
            this.sendWidgetEvent("widget-click", i);
        }
        sendWidgetScrolledEvent(t) {
            this.isScrolled || ((this.isScrolled = !0), this.sendWidgetEvent("widget-scrolled", { widget_scroll_type: t }));
        }
        sendWidgetPlayerCloseEvent(t, n) {
            if (!this.feedVisible) return;
            const o = {
                ...D(this.getPlatformWidgetConfig(), this.getStory(t)),
                story_chapter_index: this.currentChapterIndex,
                story_muted: this.isMuted,
                ...this.getStoryCompletionProperties(t),
                ...this.getChapterCompletionProperties(t),
                widget_player_close_reason: n,
                story_displayed_format: this.storyPlatform,
                widget_click_count: this.clickCount,
            };
            this.sendWidgetEvent("widget-player-close", o), this.setFeedVisible(!1);
        }
        sendStoryEvent(t, n, i) {
            const o = B(this.getPlatformWidgetConfig(), this.audienceSlotMatch),
                s = D(this.getPlatformWidgetConfig(), this.getStory(t)),
                r = li(this.getStory(t), this.currentChapterIndex),
                a = ai(n) ? this.getStoryCompletionProperties(t) : {},
                l = ci(n) ? this.getChapterCompletionProperties(t) : {},
                u = { ...o, ...s, ...r, ...i, ...a, ...l, story_previous_chapter_index: this.previousChapterIndex, story_muted: this.isMuted, story_displayed_format: this.storyPlatform, widget_click_count: this.clickCount },
                d = di(n, this.owner, u, this.customUserInfo);
            this.sendEvent(d);
        }
        sendStoryViewEvent(t) {
            (this.storyEngageCount = 0), this.sendStoryEvent(t, "story-view", {});
        }
        sendStoryChapterDisplayedEvent(t) {
            this.currentChapterIndex === 0 && this.sendStoryEvent(t, "story-first-chapter-view", {}),
                this.currentChapterIndex >= this.getStory(t).chapters.length - 1 && this.sendStoryEvent(t, "story-last-chapter-view", {}),
                this.sendStoryEvent(t, "story-chapter-view", {});
        }
        sendStorySwipeEvent(t, n) {
            switch (n) {
                case "swipe-next":
                    this.sendStoryEvent(t, "story-swipe-next", {}), this.sendStoryChapterExitEvent(t, "swipe-next"), this.sendStoryExitEvent(t, "swipe-next"), this.isLastStory(t) && this.sendWidgetPlayerCloseEvent(t, "swipe-next");
                    break;
                case "swipe-previous":
                    this.isFirstStory(t) || (this.sendStoryEvent(t, "story-swipe-previous", {}), this.sendStoryChapterExitEvent(t, "swipe-previous"), this.sendStoryExitEvent(t, "swipe-previous"));
                    break;
                case "swipe-down":
                    this.sendStoryChapterExitEvent(t, "swipe-down"), this.sendStoryExitEvent(t, "swipe-down"), this.sendWidgetPlayerCloseEvent(t, "swipe-down");
            }
        }
        sendStoryPauseMobileEvent(t, n) {
            this.sendStoryEvent(t, "story-pause", {}), this.sendStoryEvent(t, "story-unpause", { story_pause_duration: Date.now() - n });
        }
        sendStoryExitEvent(t, n) {
            this.feedVisible && (this.sendStoryEvent(t, "story-exit", { story_exit_reason: n }), (this.previousChapterIndex = null));
        }
        sendStoryCompletedEvent(t) {
            this.sendStoryEvent(t, "story-completed", {}), this.sendStoryChapterExitEvent(t, "auto-advance"), this.sendStoryExitEvent(t, "auto-advance"), this.isLastStory(t) && this.sendWidgetPlayerCloseEvent(t, "auto-advance");
        }
        sendStoryTabChangeEvent(t, n) {
            if (n) this.setActiveStory(t), this.sendStoryViewEvent(t), this.setOpenedChapter(t), this.sendStoryChapterDisplayedEvent(t);
            else {
                const i = this.storyExitReason || "tab-change";
                this.sendStoryExitEvent(t, i), this.sendStoryChapterExitEvent(t, i), (this.storyExitReason = null);
            }
        }
        sendStoryPauseEvent(t) {
            this.sendStoryEvent(t, "story-pause", {}), (this.pausedAt = Date.now());
        }
        sendStoryUnpauseEvent(t) {
            this.sendStoryEvent(t, "story-unpause", { story_pause_duration: this.pausedAt ? Date.now() - this.pausedAt : null });
        }
        sendStoryChangeChapterEvent(t, n) {
            if (n === "previous" && this.isFirstStory(t) && this.currentChapterIndex === 0) return;
            const i = this.getStory(t);
            this.sendStoryEvent(t, `story-tap-${n}`, {}),
                this.sendStoryChapterExitEvent(t, n === "next" ? "tap-next" : "tap-previous"),
                this.currentChapterIndex === i.chapters.length - 1 && n === "next" && this.sendStoryExitEvent(t, "tap-next"),
                this.currentChapterIndex === 0 && n === "previous" && this.sendStoryExitEvent(t, "tap-previous"),
                this.isLastStory(t) && this.isLastChapter(t, this.currentChapterIndex) && n === "next" && this.sendWidgetPlayerCloseEvent(t, "tap-next");
        }
        sendStoryChapterExitEvent(t, n) {
            this.feedVisible &&
                (this.sendStoryEvent(t, "story-chapter-exit", { story_chapter_exit_reason: n }),
                ((n === "tap-previous" && this.currentChapterIndex !== 0) || ((n === "tap-next" || n === "auto-advance") && !this.isLastChapter(t, this.currentChapterIndex))) && (this.previousChapterIndex = this.currentChapterIndex));
        }
        sendStoryCloseEvent(t) {
            this.sendStoryChapterExitEvent(t, "close-button"), this.sendStoryExitEvent(t, "close-button"), this.sendWidgetPlayerCloseEvent(t, "close-button");
        }
        sendStoryCloseShortcutEvent(t) {
            this.sendStoryChapterExitEvent(t, "close-shortcut"), this.sendStoryExitEvent(t, "close-shortcut"), this.sendWidgetPlayerCloseEvent(t, "close-shortcut");
        }
        sendBackgroundExitEvent() {
            this.activeStoryId && (this.sendStoryChapterExitEvent(this.activeStoryId, "background"), this.sendStoryExitEvent(this.activeStoryId, "background"), this.sendWidgetPlayerCloseEvent(this.activeStoryId, "background"));
        }
        sendHistoryBackExitEvent() {
            this.activeStoryId && (this.sendStoryChapterExitEvent(this.activeStoryId, "history-back"), this.sendStoryExitEvent(this.activeStoryId, "history-back"), this.sendWidgetPlayerCloseEvent(this.activeStoryId, "history-back"));
        }
        sendInteractionEvent(t, n, i) {
            const o = B(this.getPlatformWidgetConfig(), this.audienceSlotMatch),
                s = this.getStory(t),
                r = D(this.getPlatformWidgetConfig(), s),
                a = { interaction_has_been_blocking: this.interactionHasBeenBlocking },
                l = { ...o, ...r, ...i, ...a, ...Qn(s, i.interaction_id), story_chapter_index: this.currentChapterIndex, story_muted: this.isMuted, story_displayed_format: this.storyPlatform, widget_click_count: this.clickCount },
                u = Kn(n, this.owner, l, this.customUserInfo);
            this.sendEvent(u);
        }
        sendInteractionViewEvent(t, n, { isAlreadyCompleted: i, interactionEngageUrl: o, interactionEngageLabel: s }) {
            (this.interactionViewingTime = Date.now()),
                (this.interactionHasBeenBlocking = !1),
                (this.interactionEngagingTime = null),
                this.sendInteractionEvent(t, "interaction-view", { interaction_id: n, interaction_is_already_completed: i, interaction_engage_url: o || null, interaction_engage_label: s || null });
        }
        sendInteractionEngageEvent(t, n, { isFirstEngage: i, isCompletionEngage: o, engageType: s, isAlreadyCompleted: r, interactionEngageValue1: a, interactionEngageValue2: l, interactionEngageUrl: u, interactionEngageLabel: d }) {
            i && (this.interactionEngagingTime = Date.now()),
                (this.storyEngageCount += 1),
                this.sendInteractionEvent(t, "interaction-engage", {
                    interaction_id: n,
                    interaction_engage_type: s,
                    interaction_is_completion_engage: o,
                    interaction_is_first_engage: i,
                    interaction_is_story_first_engage: this.storyEngageCount <= 1,
                    interaction_is_already_completed: r,
                    interaction_engage_value_1: a || null,
                    interaction_engage_value_2: l || null,
                    interaction_engage_url: u || null,
                    interaction_engage_label: d || null,
                });
        }
        sendInteractionCompleteEvent(t, n, { isFirstEngage: i, engageType: o, isAlreadyCompleted: s, interactionEngageValue1: r, interactionEngageValue2: a, interactionEngageUrl: l, interactionEngageLabel: u }) {
            const d = this.interactionEngagingTime ? Date.now() - this.interactionEngagingTime : null;
            this.sendInteractionEvent(t, "interaction-completed", {
                interaction_id: n,
                interaction_is_already_completed: s,
                interaction_engage_type: o || null,
                interaction_engaging_time: d || null,
                interaction_is_first_engage: i,
                interaction_is_story_first_engage: this.storyEngageCount <= 1,
                interaction_engage_value_1: r || null,
                interaction_engage_value_2: a || null,
                interaction_engage_url: l || null,
                interaction_engage_label: u || null,
            }),
                o === "redirect" && (this.storyExitReason = "interaction-redirect");
        }
        sendInteractionExitEvent(t, n, { exitState: i, interactionEngageUrl: o, interactionEngageLabel: s }) {
            const r = Date.now() - (this.interactionViewingTime || 0),
                a = this.interactionEngagingTime ? Date.now() - this.interactionEngagingTime : null;
            this.sendInteractionEvent(t, "interaction-exit", {
                interaction_id: n,
                interaction_viewing_time: r,
                interaction_exit_state: i,
                interaction_engaging_time: a,
                interaction_is_already_completed: i === "already-completed",
                interaction_engage_url: o || null,
                interaction_engage_label: s || null,
            });
        }
        sendProductEvent(t, n, i) {
            const o = i.interaction_id,
                s = i.product_id,
                r = i?.product_variant || null,
                a = B(this.getPlatformWidgetConfig(), this.audienceSlotMatch),
                l = this.getStory(t),
                u = D(this.getPlatformWidgetConfig(), l),
                d = { ...a, ...u, ...ti(l, o, s, r), ...i, story_chapter_index: this.currentChapterIndex, story_muted: this.isMuted, story_displayed_format: this.storyPlatform, widget_click_count: this.clickCount },
                f = ei(n, this.owner, d, this.customUserInfo);
            this.sendEvent(f);
        }
        sendProductLoadedEvent(t, n, i) {
            this.sendProductEvent(t, "product-loaded", { interaction_id: n, product_id: i });
        }
        sendProductViewEvent(t, n, i) {
            this.sendProductEvent(t, "product-view", { interaction_id: n, product_id: i });
        }
        sendProductDetailsViewEvent(t, n, i) {
            this.sendProductEvent(t, "product-details-view", { interaction_id: n, product_id: i });
        }
        sendProductEngageEvent(t, n, i, { productVariant: o, isFirstEngage: s, isCompletionEngage: r, productQuantity: a, engageType: l, productEngageValue_1: u, productEngageValue_2: d, productEngageUrl: f, productEngageLabel: h }) {
            this.sendProductEvent(t, "product-engage", {
                interaction_id: n,
                product_id: i,
                product_variant: o || null,
                product_quantity: a,
                product_engage_type: l,
                product_is_completion_engage: r,
                product_is_first_engage: s,
                product_engage_value_1: u || null,
                product_engage_value_2: d || null,
                product_engage_url: f || null,
                product_engage_label: h || null,
            });
        }
        sendProductErrorEvent(t, n, i, o, { errorMessage: s, errorCode: r }) {
            this.sendProductEvent(t, "product-error", { interaction_id: n, product_id: i, product_variant: o, product_error_message: s, product_error_code: r });
        }
        getPlatformWidgetConfig() {
            return H(this.widgetConfig, this.platform);
        }
        getStory(t) {
            const n = this.widgetConfig.storiesData[t];
            if (!n) throw new Error(`Story with id ${t} not found`);
            return H(n, this.storyPlatform);
        }
        isFirstStory(t) {
            return this.widgetConfig.stories[0]._id === t;
        }
        isLastStory(t) {
            return this.widgetConfig.stories[this.widgetConfig.stories.length - 1]._id === t;
        }
        isLastChapter(t, n) {
            return n === this.getStory(t).chapters.length - 1;
        }
        getStoryCompletionProperties(t) {
            return { story_completion: this.videoControllerMap[t]?.completionRatio ?? null, story_viewing_time: this.storyViewingTime ? Date.now() - this.storyViewingTime : null };
        }
        getChapterCompletionProperties(t) {
            const n = this.videoControllerMap[t],
                i = n?.chapters[this.currentChapterIndex],
                o = n?.currentTime;
            return { story_chapter_completion: Tn(o, i), story_chapter_viewing_time: this.storyChapterViewingTime ? Date.now() - this.storyChapterViewingTime : null };
        }
        sendEvent(t) {
            if (!this.enabled) return;
            const n = this.cleanAnalyticsData(t);
            this.sendAnalyticsToServer(n), this.sendAnalyticToDataLayer(n), this.sendAnalyticsToCallback(n), pi(this.getPlatformWidgetConfig().analyticsUrl, this.owner);
        }
        sendAnalyticsToServer(t) {
            const n = this.getPlatformWidgetConfig().analyticsUrl;
            n && navigator.sendBeacon(n, JSON.stringify(t));
        }
        sendAnalyticToDataLayer(t) {}
        sendAnalyticsToCallback(t) {
            window.JoinStories?.emit("JOIN_ANALYTICS", t), this.callback?.(t);
        }
        removeNullAndUndefinedValues(t) {
            return typeof t != "object" || t === null ? t : Un(t, (n) => n == null);
        }
        roundNumericValues(t) {
            if (typeof t != "object" || t === null) return t;
            const n = (i) => Math.round(i * 1e6) / 1e6;
            return Object.fromEntries(Object.entries(t).map(([i, o]) => (typeof o == "number" && !Number.isNaN(o) ? [i, n(o)] : [i, o])));
        }
        cleanAnalyticsData(t) {
            const n = this.removeNullAndUndefinedValues(t);
            return this.roundNumericValues(n);
        }
        bindAllMethods() {
            (this.setCustomUserInfo = this.setCustomUserInfo.bind(this)),
                (this.setDisplayTimestamp = this.setDisplayTimestamp.bind(this)),
                (this.setEnabled = this.setEnabled.bind(this)),
                (this.setPlatform = this.setPlatform.bind(this)),
                (this.setStoryPlatform = this.setStoryPlatform.bind(this)),
                (this.setVideoController = this.setVideoController.bind(this)),
                (this.setAudienceSlotMatch = this.setAudienceSlotMatch.bind(this)),
                (this.setActiveStory = this.setActiveStory.bind(this)),
                (this.setFeedVisible = this.setFeedVisible.bind(this)),
                (this.setMuted = this.setMuted.bind(this)),
                (this.setOpenedChapter = this.setOpenedChapter.bind(this)),
                (this.setDocumentScrolled = this.setDocumentScrolled.bind(this)),
                (this.setInteractionBlocked = this.setInteractionBlocked.bind(this)),
                (this.sendWidgetEvent = this.sendWidgetEvent.bind(this)),
                (this.sendWidgetInitializedEvent = this.sendWidgetInitializedEvent.bind(this)),
                (this.sendWidgetDisplayedEvent = this.sendWidgetDisplayedEvent.bind(this)),
                (this.sendWidgetVisibilityEvent = this.sendWidgetVisibilityEvent.bind(this)),
                (this.sendWidgetClickEvent = this.sendWidgetClickEvent.bind(this)),
                (this.sendWidgetScrolledEvent = this.sendWidgetScrolledEvent.bind(this)),
                (this.sendWidgetPlayerCloseEvent = this.sendWidgetPlayerCloseEvent.bind(this)),
                (this.sendStoryEvent = this.sendStoryEvent.bind(this)),
                (this.sendStoryViewEvent = this.sendStoryViewEvent.bind(this)),
                (this.sendStoryChapterDisplayedEvent = this.sendStoryChapterDisplayedEvent.bind(this)),
                (this.sendStorySwipeEvent = this.sendStorySwipeEvent.bind(this)),
                (this.sendStoryPauseMobileEvent = this.sendStoryPauseMobileEvent.bind(this)),
                (this.sendStoryExitEvent = this.sendStoryExitEvent.bind(this)),
                (this.sendStoryPauseEvent = this.sendStoryPauseEvent.bind(this)),
                (this.sendStoryUnpauseEvent = this.sendStoryUnpauseEvent.bind(this)),
                (this.sendStoryChangeChapterEvent = this.sendStoryChangeChapterEvent.bind(this)),
                (this.sendStoryChapterExitEvent = this.sendStoryChapterExitEvent.bind(this)),
                (this.sendBackgroundExitEvent = this.sendBackgroundExitEvent.bind(this)),
                (this.sendInteractionEvent = this.sendInteractionEvent.bind(this)),
                (this.sendInteractionViewEvent = this.sendInteractionViewEvent.bind(this)),
                (this.sendInteractionEngageEvent = this.sendInteractionEngageEvent.bind(this)),
                (this.sendInteractionCompleteEvent = this.sendInteractionCompleteEvent.bind(this)),
                (this.sendInteractionExitEvent = this.sendInteractionExitEvent.bind(this)),
                (this.sendProductEvent = this.sendProductEvent.bind(this)),
                (this.sendProductLoadedEvent = this.sendProductLoadedEvent.bind(this)),
                (this.sendProductViewEvent = this.sendProductViewEvent.bind(this)),
                (this.sendProductDetailsViewEvent = this.sendProductDetailsViewEvent.bind(this)),
                (this.sendProductEngageEvent = this.sendProductEngageEvent.bind(this)),
                (this.sendProductErrorEvent = this.sendProductErrorEvent.bind(this)),
                (this.getPlatformWidgetConfig = this.getPlatformWidgetConfig.bind(this)),
                (this.getStory = this.getStory.bind(this)),
                (this.sendEvent = this.sendEvent.bind(this));
        }
    }
    class _i {
        listeners = {};
        subscribe(t, n) {
            return (
                this.listeners[t] || (this.listeners[t] = []),
                this.listeners[t].push(n),
                () => {
                    this.unsubscribe(t, n);
                }
            );
        }
        unsubscribe(t, n) {
            this.listeners[t] && (this.listeners[t] = this.listeners[t].filter((i) => i !== n));
        }
        async emit(t, ...n) {
            if (this.listeners[t]) {
                performance.mark(`feed-events-controller-${t} - start`);
                for await (const i of this.listeners[t]) await i(...n);
                performance.mark(`feed-events-controller-${t} - end`), performance.measure(`feed-events-controller-${t}`, `feed-events-controller-${t} - start`, `feed-events-controller-${t} - end`);
            }
        }
    }
    const vi = (e, t) => {
        window.joinStories || (window.joinStories = {}),
            window.joinStories.adsTargeting || (window.joinStories.adsTargeting = { global: {}, byWidget: {} }),
            t ? (window.joinStories.adsTargeting.byWidget[t] = { ...window.joinStories.adsTargeting.byWidget[t], ...e }) : (window.joinStories.adsTargeting.global = { ...window.joinStories.adsTargeting.global, ...e });
    };
    class W extends _i {
        static instance;
        constructor() {
            if (W.instance) return W.instance;
            super(),
                (this.subscribe = this.subscribe.bind(this)),
                (this.unsubscribe = this.unsubscribe.bind(this)),
                (this.emit = this.emit.bind(this)),
                this.emit("JOIN_STORIES_READY").catch((t) => {
                    console.error("Error emitting JOIN_STORIES_READY", t);
                }),
                (W.instance = this);
        }
        emit = async (t, ...n) => {
            await super.emit(t, ...n);
            const i = new CustomEvent(t, { detail: n[0] });
            document.dispatchEvent(i);
        };
        closePlayer(t) {
            return this.emit("JOIN_STORIES_CLOSE_PLAYER", t);
        }
        addToCart(t) {
            return this.emit("JOIN_STORIES_ADD_TO_CART", t);
        }
        resolveAddToCart(t, n) {
            return this.emit("JOIN_STORIES_ADD_TO_CART_RESOLVED", t, n);
        }
        sendProductAddToCart(t) {
            return this.emit("JOIN_STORIES_PRODUCT_ADD_TO_CART", t);
        }
        sendProductRemoveFromCart(t) {
            return this.emit("JOIN_STORIES_PRODUCT_REMOVE_FROM_CART", t);
        }
        sendProductAddToFavorite(t) {
            return this.emit("JOIN_STORIES_PRODUCT_ADD_TO_FAVORITE", t);
        }
        sendCartValidated(t) {
            return this.emit("JOIN_STORIES_CART_VALIDATED", t);
        }
        renderAd(t) {
            return this.emit("JOIN_STORIES_RENDER_AD", t);
        }
        setCustomAdsTargeting(t, n) {
            vi(t, n);
        }
    }
    const Zt = () => {
            if (window.JoinStories) return window.JoinStories;
            const e = new W();
            return (window.JoinStories = e), e;
        },
        yi = (e, { load: t, unload: n }) => {
            if ((window.joinStories || (window.joinStories = { widgets: {}, animations: {} }), window.joinStories.widgets || (window.joinStories.widgets = {}), !window.joinStories.widgets[e]))
                window.joinStories.widgets[e] = { loaded: !1, load: t, unload: n };
            else {
                const i = window.joinStories.widgets[e];
                window.joinStories.widgets[e] = {
                    loaded: !1,
                    load: () => {
                        i.load(), t();
                    },
                    unload: () => {
                        i.unload(), n();
                    },
                };
            }
        },
        A = (e, t) => {
            window.joinStories?.widgets?.[e] && (window.joinStories.widgets[e].loaded = t);
        };
    function mi(e) {
        document.readyState === "loading" ? window.addEventListener("DOMContentLoaded", e) : e();
    }
    const qt = "jDataLayer";
    function wi(e, t) {
        window[e] = window[e] || [];
        const n = window[e].push;
        window[e].push = function (...i) {
            const o = n.apply(window[e], i);
            return t?.(), o;
        };
    }
    const bi = ["en", "fr", "de", "es", "it", "pt", "nl", "sv", "da", "fi", "ca", "et", "el", "ro", "ru", "zh"],
        Gt = (e) => {
            try {
                const t = parseFloat(e);
                return isNaN(t) ? void 0 : t;
            } catch {
                return;
            }
        },
        O = (e, t, n) => {
            const i = Gt(e),
                o = Gt(t);
            return n(i, o);
        },
        et = (e, t) => e.localeCompare(t, "en", { usage: "search", sensitivity: "base", ignorePunctuation: !0 }) === 0,
        Qt = (e, t) => e.toLowerCase().includes(t.toLowerCase()),
        Kt = (e, t) => {
            try {
                return e.some((n) => et(n.toString(), t));
            } catch {
                return !1;
            }
        },
        Xt = (e, t = []) => {
            try {
                const n = new Set(t.map((i) => i.toLowerCase()));
                return e.length !== n.size ? !1 : e.every((i) => n.has(i.toLowerCase()));
            } catch {
                return !1;
            }
        },
        te = (e, t, n, i) => {
            if (t === "language" && i === "other") return e && typeof e == "string" && !bi.includes(e);
            switch (n) {
                case "STR_CONTAINS":
                    return !!e && typeof e == "string" && Qt(e, i);
                case "STR_NOT_CONTAINS":
                    return !!e && typeof e == "string" && !Qt(e, i);
                case "STR_EQUALS":
                    return !!e && typeof e == "string" && et(e, i);
                case "STR_NOT_EQUALS":
                    return !!e && typeof e == "string" && !et(e, i);
                case "NUM_EQUALS":
                    return O(e, i, (o, s) => o === s);
                case "NUM_NOT_EQUALS":
                    return O(e, i, (o, s) => o !== s);
                case "NUM_GT":
                    return O(e, i, (o, s) => o > s);
                case "NUM_GTE":
                    return O(e, i, (o, s) => o >= s);
                case "NUM_LT":
                    return O(e, i, (o, s) => o < s);
                case "NUM_LTE":
                    return O(e, i, (o, s) => o <= s);
                case "BOOL_EQUALS":
                    return String(e) === String(i);
                case "LIST_CONTAINS":
                    return !!e && Array.isArray(e) && Kt(e.map(String), i);
                default:
                    return !1;
            }
        },
        ee = (e, t) =>
            e.constraints.every((n) => {
                const i = t[n.key];
                switch (n.operator) {
                    case "ANY_NOT_SET":
                        return i == null;
                    case "ANY_SET":
                        return i != null;
                    case "LIST_EQUALS":
                        return i && Array.isArray(i) && Xt(i, n.value?.map(String));
                    case "LIST_NOT_EQUALS":
                        return i && Array.isArray(i) && !Xt(i, n.value?.map(String));
                    case "LIST_EMPTY":
                        return Array.isArray(i) && i.length === 0;
                    case "LIST_NOT_EMPTY":
                        return Array.isArray(i) && i.length > 0;
                    case "LIST_NOT_CONTAINS":
                        return i && n.value && Array.isArray(i) && n.value.map(String).every((o) => !Kt(i, o));
                    case "STR_NOT_EQUALS":
                    case "NUM_NOT_EQUALS":
                    case "STR_NOT_CONTAINS":
                        return n.value && n.value.map(String).every((o) => te(i, n.key, n.operator, o));
                    default:
                        return n.value?.some((o) => te(i, n.key, n.operator, o));
                }
            }),
        ne = () => {
            const t = (window[qt] || []).reduce((i, o) => (o.type === "audience" && o.data ? { ...i, ...o.data } : i), {});
            return { language: (navigator?.language || navigator?.userLanguage)?.split("-")?.[0] || "en", ...t };
        },
        Si = (e, t) => {
            const { content: n, slots: i } = e;
            return n.filter((s) => (s.type === "story" || !s.slotId ? !1 : (i?.[s.slotId]?.audiences || []).some((a) => ee(a, t)))).map((s) => s.slotId);
        },
        Ci = (e, t) => {
            const { storiesData: n, content: i, slots: o } = e,
                r = i
                    .filter((a) => (a.type === "story" ? !0 : (o?.[a.slotId]?.audiences || []).some((u) => ee(u, t))))
                    .map((a) => (a.type === "slot" ? a.data.map((l) => n[l.storyId]) : n[a.data]))
                    .flat();
            return [...new Map(r.map((a) => [a._id, a])).values()];
        },
        Ei = [0.5, 0.75];
    class Ti {
        config;
        enabled;
        _lastVisibleRatio;
        callback;
        constructor(t, n, i) {
            (this.enabled = t), (this.config = n), (this.callback = i), (this._lastVisibleRatio = 0);
        }
        init() {
            this.sendWidgetBeacon("widgetMounted"), this.sendWidgetBeacon("storiesFetched"), (this._lastVisibleRatio = 0);
        }
        sendWidgetVisibleBeacon(t) {
            this._lastVisibleRatio >= t || !Ei.includes(t) || ((this._lastVisibleRatio = t), this.sendWidgetBeacon(`componentVisible${t * 100}`));
        }
        sendWidgetBeacon(t, n = {}) {
            const i = { event_version: "1", ...this.getWidgetConf(), ...n, eventType: t },
                o = {
                    event_version: i.event_version,
                    eventOwner: i.eventOwner,
                    cpWidgetAlias: i.cpWidgetAlias,
                    cpWidgetVersion: i.cpWidgetVersion,
                    date: i.date,
                    eventCategory: i.eventCategory,
                    ...(i.cpGoToUrl ? { storyClicked: i.cpGoToUrl } : {}),
                    eventType: t,
                };
            this.sendAnalyticsToServer("widgets/", i), this.sendAnalyticToDataLayer(o), this.sendAnalyticsToCallback(i);
        }
        sendStoryBeacon(t, n, i) {
            const o = { event_version: "1", ...this.getStoryConf(n), ...i, eventType: t },
                s = { event_version: o.event_version, storyPageCount: o.storyPageCount, eventOwner: o.eventOwner, storyId: o.storyId, date: o.date, eventCategory: o.eventCategory, cpIndex: o.cpIndex, cpTitle: o.cpTitle, eventType: t };
            this.sendAnalyticsToServer("stories/", o), this.sendAnalyticToDataLayer(s), this.sendAnalyticsToCallback(o);
        }
        sendAnalyticsToCallback(t) {
            this.callback?.(t), window.JoinStories?.emit("JOIN_ANALYTICS", t);
        }
        sendAnalyticsToServer(t, n) {
            if (this.enabled && this.config.analyticsUrl) {
                const i = `${this.config.analyticsUrl}${t}`;
                navigator.sendBeacon(i, JSON.stringify(n));
            }
        }
        sendAnalyticToDataLayer(t) {
            if (this.enabled && this.config.dataLayerName)
                try {
                    const n = this.getDataLayer() || [];
                    n.push({ ...t, provider: "join-stories" }), this.getDataLayer() || this.setDataLayer(n);
                } catch {}
        }
        getDataLayer() {
            if (this.config.dataLayerName) return window[this.config.dataLayerName];
        }
        setDataLayer(t) {
            this.config.dataLayerName && (window[this.config.dataLayerName] = t);
        }
        getStoryConf(t) {
            return {
                storyPageCount: t.pageCount,
                storyPageEngagementCount: t.engagementCount,
                eventOwner: t.owner ?? this.config.owner,
                storyId: t._id,
                storySlug: "web-story-slug",
                storyWorkspace: "ws_default",
                date: Date.now(),
                eventCategory: "story",
                cpTitle: "web-story-title",
                eventUrl: window.location.href,
                cpDocumentReferrer: jn(this.config),
                cpScreenResolution: `${window.screen.width}x${window.screen.height}`,
                cpScreenColor: window.screen.colorDepth,
                cpBrowserLanguage: navigator.language || navigator.userLanguage,
                cpUserAgent: navigator.userAgent.toLowerCase(),
                hit: this.enabled,
            };
        }
        getWidgetConf() {
            return {
                eventOwner: this.config.owner,
                cpWidgetAlias: this.config.alias,
                cpWidgetType: this.config.type,
                cpWidgetVersion: this.config.version,
                eventWidgetWorkspaces: ["ws_default"],
                date: Date.now(),
                eventCategory: "widget",
                cpTitle: document.title,
                eventUrl: window.location.href,
                cpBaseUrl: window.location.href.split(/\?|#/)[0],
                cpScreenResolution: `${window.screen.width}x${window.screen.height}`,
                cpScreenColor: window.screen.colorDepth,
                cpBrowserLanguage: (navigator.language || navigator.userLanguage).toLowerCase(),
                cpUserAgent: navigator.userAgent.toLowerCase(),
                hit: this.enabled,
            };
        }
    }
    const Li = " and ",
        xi = (e) => e.replace(/[A-Z]/g, (t) => `-${t.toLowerCase()}`).toLowerCase(),
        ki = (e) =>
            typeof e == "string"
                ? e
                : Object.entries(e)
                      .map(([t, n]) => {
                          const i = xi(t);
                          let o = n;
                          return typeof o == "boolean" ? (o ? i : `not ${i}`) : (typeof o == "number" && /[height|width]$/.test(i) && (o = `${o}px`), `(${i}: ${o})`);
                      })
                      .join(Li),
        Ii = (e) => {
            const t = ki(e),
                n = g.useMemo(() => window.matchMedia(t), [t]),
                [i, o] = g.useState(n.matches);
            return (
                g.useEffect(() => {
                    let s = !0;
                    const r = () => {
                        s && o(n.matches);
                    };
                    return (
                        n.addListener(r),
                        () => {
                            (s = !1), n.removeListener(r);
                        }
                    );
                }, [n, t]),
                i
            );
        },
        Pi = (e, t) => {
            const n = Ii({ minAspectRatio: "3/4" }),
                o = (t ? t === "desktop" : n) ? "desktop" : "mobile";
            return { platformWidgetConfig: g.useMemo(() => H(e, o), [e, o]), platform: o };
        };
    function ie(e, t) {
        if (!e || !t) return;
        const n = new FontFace(e.replace(/'/g, ""), `url(${t})`, { display: "block" });
        document.fonts.add(n);
    }
    const Ai = (e) => {
            g.useEffect(() => {
                e.labelsStyle?.websiteFont || (e.labelsStyle?.fontFamily && e.labelsStyle.fontUrl ? ie(e.labelsStyle.fontFamily, e.labelsStyle.fontUrl) : ie($, le));
            }, [e.labelsStyle]);
        },
        Oi = ({ layout: e, widgetConfig: t, feedPlayerPath: n, feedPlayerEnabled: i = !0, enableAnalytics: o, platform: s, onStoryClick: r, forceVisible: a, analyticsCallback: l, analyticsControllerV2: u }) => {
            const { platformWidgetConfig: d, platform: f } = Pi(t, s),
                { disabled: h } = d;
            g.useEffect(() => {
                f && u?.setPlatform(f);
            }, [f]);
            const v = g.useMemo(() => Ye(e, d.shape), [e, d.shape]),
                [m, k] = g.useState(),
                E = g.useRef(new Ti(o, d, l)),
                y = g.useRef(!1),
                [C, L] = g.useState([]),
                w = g.useRef(null),
                T = g.useRef(!1);
            Ai(d);
            const I = g.useMemo(() => G(t.stories), [t.stories]);
            g.useEffect(() => {
                h || (E.current.init(), (y.current = !1));
            }, [h, I]),
                g.useEffect(() => {
                    E.current.config = d;
                }, [d]),
                g.useEffect(() => {
                    if (h || !i) return;
                    let S;
                    const N = () => {
                        if (!window.JoinFeedPlayer) {
                            console.warn("JOIN: JoinFeedPlayer not found");
                            return;
                        }
                        const re = window.JoinFeedPlayer;
                        (S = new re(t, E.current, u ?? null, { container: w.current })), k(S);
                    };
                    return (
                        window.JoinFeedPlayer
                            ? N()
                            : n &&
                              Ze(n, () => {
                                  N();
                              }),
                        () => {
                            S?.destroy();
                        }
                    );
                }, [h, i, n, E, t]);
            const p = (S) => {
                    m?.setContainer(S);
                },
                b = (S) => {
                    y.current ? E.current.sendWidgetBeacon("additionalClickOnWidget", { cpGoToUrl: S._id }) : (E.current.sendWidgetBeacon("firstClickOnWidget", { cpGoToUrl: S._id }), (y.current = !0)), u?.sendWidgetClickEvent(S);
                };
            g.useEffect(
                () => (
                    d.enableRead && L(z(yt) ?? []),
                    m?.subscribe("close", () => {
                        d.enableRead && L(z(yt) ?? []);
                    })
                ),
                [d, m]
            );
            const P = async (S, N) => {
                if (!T.current)
                    if (((T.current = !0), b(S), r)) await r(S, N), (T.current = !1);
                    else {
                        m?.switchToStory(S, N),
                            !!m?.ready ||
                                (await new Promise((Mi) => {
                                    let ae = !1;
                                    const it = () => {
                                        ae || ((ae = !0), m?.unsubscribe("contentReady", it), Mi(null));
                                    };
                                    m?.subscribe("contentReady", it);
                                    const Vi = qe(e, d.shape);
                                    setTimeout(it, Vi);
                                }));
                        const Wi = e === "solo-sticky" && f === "desktop";
                        await m?.open(N, Wi), (T.current = !1);
                    }
            };
            return h
                ? null
                : v
                ? c(mt.Provider, {
                      value: C,
                      children: c(v, { feedPlayer: m, analyticsController: E.current, analyticsControllerV2: u, containerRef: w, forceVisible: a ?? t.forceVisible, widgetConfig: d, platform: f, onClick: P, setContainer: p }),
                  })
                : (console.warn(`JOIN: Trigger for ${t.alias} not found (layout: ${e}, shape: ${d.shape})`), null);
        },
        Ni = (e) => {
            if (!e) return;
            const t = new RegExp({}.VITE_FEED_PATH ?? /\/index.js/);
            return e.replace(t, "/feed/index.js");
        },
        Ri = (e) => {
            e.style.minHeight = "";
        },
        oe = (e) => {
            e.style.minHeight = "0";
        },
        se = (e, t) => {
            const n = () => {
                const i = document.querySelector(`.join-sticky-host[data-widget-alias="${e.alias}"]`);
                if (i) return i;
                const o = document.createElement("div", {});
                return o.classList.add("join-sticky-host"), (o.style.display = "block"), o.setAttribute("data-widget-alias", e.alias), document.body.appendChild(o), o;
            };
            return e.type === "solo-sticky" ? n() : t ? document.getElementById(t) : void 0;
        },
        ji = (e) => {
            if (!e) return;
            const t = document.getElementById(e);
            if (!t) return;
            oe(t);
            const n = t.shadowRoot;
            n && _.render(null, n);
        };
    let nt = "";
    const Di = (e, { alias: t, divId: n, enableAnalytics: i = !0 } = {}) => {
        const o = n ?? document.currentScript?.getAttribute("data-join-widget-id"),
            s = t ?? document.currentScript?.getAttribute("data-join-widget-alias"),
            r = document.currentScript?.getAttribute("src");
        if (!s) {
            console.warn("JOIN: Widget alias not provided");
            return;
        }
        let a;
        const l = () => {
                const h = window.JOIN_ENV[s];
                if (!h) {
                    ji(o), console.warn(`JOIN: Config for ${s} not found`), A(s, !1);
                    return;
                }
                const v = se(h, o);
                if (!v) {
                    console.warn(`JOIN: Element with id ${o} not found`), A(s, !1);
                    return;
                }
                const m = v.shadowRoot ?? v.attachShadow({ mode: "open" }),
                    k = Ci(h, ne());
                if (k.length === 0) {
                    oe(v), _.render(null, m), A(s, !1);
                    return;
                }
                Ri(v);
                const E = G(k),
                    y = Si(h, ne()),
                    C = { ...h, stories: k },
                    L = Wn(),
                    w = i && !L;
                a ? (a.setWidgetConfig(C), a.setAudienceSlotMatch(y)) : (a = new fi({ widgetConfig: C, audienceSlotMatch: y, platform: window.matchMedia("(min-aspect-ratio: 3/4)").matches ? "desktop" : "mobile", enabled: w })),
                    a.sendWidgetEvent("widget-data-loaded", { widget_data_loading_time: 0 }),
                    a.sendWidgetDisplayedEvent(v.offsetTop),
                    nt !== E && _.render(c(Oi, { analyticsControllerV2: a, enableAnalytics: w ?? !0, widgetConfig: C, feedPlayerPath: Ni(r), layout: e }), m),
                    (nt = E),
                    A(s, !0);
            },
            u = (h) => {
                h || (A(s, !1), mi(l));
            },
            d = () => {
                const h = window.JOIN_ENV[s];
                if (!h) return;
                const v = se(h, o);
                v?.shadowRoot && (_.render(null, v.shadowRoot), A(s, !1), (nt = ""));
            };
        yi(s, {
            load: (h) => {
                h && d(), u();
            },
            unload: d,
        }),
            Zt(),
            wi(qt, u),
            Zt(),
            u(window.JOIN_ENV[s]?.preventAutoLoad);
    };
    on(), En(), Di("list");
})(JoinPreactHooks, JoinPreact);
